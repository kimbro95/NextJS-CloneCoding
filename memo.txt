########################
### 3.0 NextJS Setup ###
########################
-NextJS í”„ë¡œì íŠ¸ ì´ˆê¸°í™”
npx create-next-app@latest --typescript (https://nextjs.org/docs/getting-started)

NextJS, React ìµœì‹ (rc) ë²„ì „ ì„¤ì¹˜
npm i next@latest react@rc react-dom@rc

ğŸš¨ ì—ëŸ¬
TypeError: Cannot set properties of undefined (setting 'reactRoot')

next.config.js íŒŒì¼ì— 
experimental: {reactRoot: true} ì¶”ê°€í•˜ì—¬ ë²„ì „ë‹¤ìš´ê·¸ë ˆì´ë“œ ì—†ì´ ì‹¤í–‰í•˜ê¸°

ì†Œí”„íŠ¸ì›¨ì–´ ë°°í¬ ìƒëª… ì£¼ê¸°
1.Alpha : ì†Œí”„íŠ¸ì›¨ì–´ í…ŒìŠ¤íŠ¸ë¥¼ ì‹œì‘í•˜ëŠ” ì²« ë‹¨ê³„
2.Beta : ì•ŒíŒŒì˜ ë’¤ë¥¼ ì‡ëŠ” ì†Œí”„íŠ¸ì›¨ì–´ ê°œë°œ ë‹¨ê³„
3.RC(Release Candidate) : ìµœì¢… ë¦´ë¦¬ì¦ˆ í›„ë³´    ğŸ‘ˆ í˜„ì¬ í”„ë¡œì íŠ¸ì˜ react ë²„ì „
4.RTM : ì™„ì„±ëœ ë²„ì „


#############################
### 3.1 TailwindCSS Setup ###
#############################
-Tawilwind CSS ì„¤ì¹˜ ë° ì´ˆê¸°í™”
npm i -D tailwindcss postcss autoprefixer
npx tailwindcss init -p ( postcss.config.js, tailwindcss.config.js íŒŒì¼ ìƒì„±)
https://tailwindcss.com/docs/installation/using-postcss

globals.css
ê¸°ì¡´ ë‚´ìš©ì„ ì „ë¶€ ì‚­ì œí•˜ê³ 
@tailwind base;
@tailwind components;
@tailwind utilities;
ì¶”ê°€


########################
### 4.0 Introduction ###
########################
-TailwindCSS
í´ë˜ìŠ¤ë¡œ ê°€ë“ ì°¬ ìœ í‹¸ë¦¬í‹° ìµœì´ˆì˜ CSSí”„ë ˆì„ì›Œí¬

-Tailwind CSS IntelliSense (vscode í™•ì¥ í”„ë¡œê·¸ë¨)
í´ë˜ìŠ¤ëª… ìë™ì™„ì„± ê¸°ëŠ¥
https://tailwindcss.com
https://tailwind.build/classes - í´ë˜ìŠ¤ ê²€ìƒ‰ ì‚¬ì´íŠ¸


#########################################################
### 4.1 Test Drive part One - 4.3 Test Drive part Two ###
#########################################################
-TailwindCSS
ex) px-1
ë’¤ì— ìˆ«ìê°€ ë¶™ìœ¼ë©´ ìˆ«ì(1)x 4 4pxì´ ì ìš©ë˜ê³  remì€ 1 / 4ì¸ 0.25remìœ¼ë¡œ ì ìš©ëœë‹¤
TailwindCSSëŠ” rem ë‹¨ìœ„ë¼ì„œ ë°˜ì‘í˜• ì›¹ì„ ë§Œë“¤ê¸°ì—ë„ í¸í•œë‹¤.

í´ë˜ìŠ¤ëª…ì—ì„œ xëŠ” left, rightì˜ xì¶• yëŠ” top, bottomì˜ yì¶•ì„ ì˜ë¯¸í•œë‹¤.
ex) px-1 : padding-left, padding-right
    py-1 : padding-top, padding-bottom


#####################
### 4.4 Modifiers ###
#####################
-TailwindCSS Modifiers List
hover(&:hover)
focus(&:focus)
active(&:active)
first(&:first-child)
disabled(&:disabled)
sm(@media (min-width: 640px))
md(@media (mid-width: 768px))
lg(@media (min-width: 1024px))
dark(@media (perfers-color-scheme: dark))
ì°¸ì¡°
https://tailwindcss.com/docs/hover-focus-and-other-states#quick-reference


#######################
### 4.5 Transitions ###
#######################
-Ring Width
ìƒì ê·¸ë¦¼ìê°€ ìˆëŠ” ìœ¤ê³½ì„ ì„ ë§Œë“¤ê¸° ìœ„í•œ ìœ í‹¸ë¦¬í‹°
ring-{width}ë¥¼ ì‚¬ìš©í•˜ì—¬ íŠ¹ì • ë‘ê»˜ì˜ solid box-shadowë¥¼ ìš”ì†Œì— ì ìš©
ë§ì€ ê¸°ë³¸ì ìœ¼ë¡œ ë°˜íˆ¬ëª…í•œ íŒŒë€ìƒ‰ìœ¼ë¡œ ë§ì€ ì‹œìŠ¤í…œì˜ ê¸°ë³¸ í¬ì»¤ìŠ¤ ë§ ìŠ¤íƒ€ì¼ê³¼ ìœ ì‚¬
ex) <button> className="...ring-offset-2 ring-2"</button>
    <button> className="...focus: ring-2"</button>
    <div className="...ring-2 hover: ring-4"></div>
    <div className="...ring-2 md: ring-4"></div>
ì°¸ì¡°
https://tailwindcss.com/docs/ring-width


-Ring Color
ì™¸ê³½ì„  ë§ì˜ ìƒ‰ìƒì„ ì„¤ì •í•˜ëŠ” ìœ í‹¸ë¦¬í‹°
ring-{color}ë¥¼ ì‚¬ìš©í•˜ì—¬ ì™¸ê³½ì„  ë§ì˜ ìƒ‰ìƒì„ ì„¤ì •
ex) <button className="...ring-2 ring-blue-500"></button>
    <button className="...ring-2 ring-blue-500/50></button>
ì°¸ì¡°
https://tailwindcss.com/docs/ring-color


###############################
### 4.6 Modifiers for Lists ###
###############################
first(:first-child) ìì‹ìš”ì†Œ ì²«ë²ˆì§¸ì— ìŠ¤íƒ€ì¼ì„ ì§€ì •
last(:last-child) ìì‹ìš”ì†Œ ë§ˆì§€ë§‰ë²ˆì§¸ì— ìŠ¤íƒ€ì¼ì„ ì§€ì •
only(:only-child) ìì‹ìš”ì†Œê°€ í•œ ê°œì¼ ê²½ìš° ìŠ¤íƒ€ì¼ ì§€ì •
odd (:nth-child(odd)) ìì‹ìš”ì†Œì˜ ìˆœì„œê°€ í™€ìˆ˜ì¼ ë•Œ ìŠ¤íƒ€ì¼ ì§€ì •
even (:nth-child(even)) ìì‹ìš”ì†Œì˜ ìˆœì„œê°€ ì§ìˆ˜ì¼ ë•ŒìŠ¤íƒ€ì¼ ì§€ì •
ì°¸ì¡°
https://tailwindcss.com/docs/hover-focus-and-other-states#first

-empty (:empty)
empth ìˆ˜ì •ìë¥¼ ì‚¬ìš©í•˜ì—¬ ì½˜í…ì¸ ê°€ ì—†ëŠ” ê²½ìš° ìŠ¤íƒ€ì¼ ì§€ì •
ex) {["1", "2", "3", ""].map((v, i) => (
        <li key={i} className="bg-green-400 py-1 empty:hidden">
            {v}
        </li>
    ))}
ë°°ì—´ì— 3ë²ˆì§¸ ë‹¤ìŒì´ ë¹ˆê°’ì´ê¸° ë•Œë¬¸ì— empty:hiddenì„ ì¤€ë‹¤
empty: hidden => display:noneê³¼ ê°™ë‹¤.
ì°¸ì¡°
https://tailwindcss.com/docs/hover-focus-and-other-states#empty


###############################
### 4.7 Modifiers for Forms ###
###############################
-group
ìƒìœ„ ìƒíƒœë¥¼ ê¸°ë°˜ìœ¼ë¡œ í•œ ìŠ¤íƒ€ì¼ ì§€ì • (group-{modifier})
ì¼ë¶€ ë¶€ëª¨ ìš”ì†Œì˜ ìƒíƒœë¥¼ ê¸°ë°˜ìœ¼ë¡œ ìš”ì†Œì˜ ìŠ¤íƒ€ì¼ì„ ì§€ì •í•´ì•¼ í•˜ëŠ” ê²½ìš° ë¶€ëª¨ë¥¼ ê·¸ë£¹ìœ¼ë¡œ í´ë˜ìŠ¤ë¥¼ í‘œì‹œí•˜ê³ 
group-hoverì™€ ê°™ì€ group-* ìˆ˜ì •ìë¥¼ ì‚¬ìš©í•˜ì—¬ ëŒ€ìƒ ìš”ì†Œì˜ ìŠ¤íƒ€ì¼ì„ ì§€ì •í•œë‹¤.
group-focus, group-active, group-oddì™€ ê°™ì€ ëª¨ë“  ìœ ì‚¬ í´ë˜ìŠ¤ ìˆ˜ì •ìì™€ í•¨ê»˜ ì‘ë™í•œë‹¤.
ì°¸ì¡°
https://tailwindcss.com/docs/hover-focus-and-other-states#styling-based-on-parent-state

-peer
í˜•ì œ ìƒíƒœë¥¼ ê¸°ë°˜ìœ¼ë¡œ í•œ ìŠ¤íƒ€ì¼ ì§€ì • (peer-{modifier})
í˜•ì œ ìš”ì†Œì˜ ìƒíƒœë¥¼ ê¸°ë°˜ìœ¼ë¡œ ìš”ì†Œì˜ ìŠ¤íƒ€ì¼ì„ ì§€ì •í•´ì•¼ í•˜ëŠ” ê²½ìš° í˜•ì œë¥¼ í”¼ì–´ í´ë˜ìŠ¤ë¡œ í‘œíˆì‚¬ê³ 
peer-invaild ê°™ì€ peer-* ìˆ˜ì •ìë¥¼ ì‚¬ìš©í•˜ì—¬ ëŒ€ìƒ ìš”ì†Œì˜ ìŠ¤íƒ€ì¼ì„ ì§€ì •í•©ë‹ˆë‹¤.
peer-focus, peer-required, peer-disabledì™€ ê°™ì€ ëª¨ë“  ìœ ì‚¬ í´ë˜ìŠ¤ ìˆ˜ì •ìì™€ í•¨ê»˜ ì‘ë™í•œë‹¤.
ì°¸ì¡°
https://tailwindcss.com/docs/hover-focus-and-other-states#styling-based-on-sibling-state


##########################
### 4.8 More Modifiers ###
##########################
-details
HTML ìš”ì†Œì´ë‹¤ detailsëŠ” ìš”ì†Œê°€ "open" ìƒíƒœì¼ ë•Œë§Œ ë‚´ë¶€ ì •ë³´ë¥¼ ë³´ì—¬ì£¼ê³  ì •ë³´ ê³µê°œ ìœ„ì ¯ì„ ìƒì„±í•œë‹¤.
ìš”ì•½ì´ë‚˜ ë ˆì´ë¸”ì€ summaryìš”ì†Œë¥¼ í†µí•´ ì œê³µí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
ì •ë³´ê³µê°œ ìœ„ì ¯ì€ ë³´í†µ ë ˆì´ë¸” ì˜†ì˜ ì‘ì€ ì‚¼ê°í˜•ì´ ëŒì•„ê°€ë©´ì„œ open/closeìƒíƒœë¡œ ë‚˜ë‰œë‹¤.
detailsìš”ì†Œì˜ ì²« ë²ˆì§¸ ìì‹ì´ summaryìš”ì†Œë¼ë©´ summaryì˜ ì½˜í…ì¸ ë¥¼ ìœ„ì ¯ì˜ ë ˆì´ë¸”ë¡œ ì‚¬ìš©í•œë‹¤.
ex) <details>
        <summary>Hello Details</summary>
        <span>Details</span>
    </details>
ì°¸ì¡°
https://developer.mozilla.org/ko/docs/Web/HTML/Element/details

-file
íŒŒì¼ ìˆ˜ì •ìë¥¼ ì‚¬ìš©í•˜ì—¬ íŒŒì¼ ì…ë ¥ì˜ ë²„íŠ¼ ìŠ¤íƒ€ì¼ ì§€ì • (file-{modifier})
ex) file:bg-blue-400 file:py-4
ì°¸ì¡°
https://tailwindcss.com/docs/hover-focus-and-other-states?email=george%40krugerindustrial&password=Bosco#file-input-buttons


#####################################################################
### 4.9 Responsive Modifiers - 4.10 Responsive Modifiers part Two ###
#####################################################################
-Responsive Design
í™”ë©´ í¬ê¸°ë¥¼ ê¸°ë°˜ìœ¼ë¡œ í•œ ìŠ¤íƒ€ì¼ ì§€ì • ( sm, md, lg, xl, 2xl )
sm: ìµœì†Œê¸¸ì´ê°€ 640px ì¼ ë•Œ
md: ìµœì†Œê¸¸ì´ê°€ 768px ì¼ ë•Œ
lg: ìµœì†Œê¸¸ì´ê°€ 1024px ì¼ ë•Œ
xl: ìµœì†Œê¸¸ì´ê°€ 1280px ì¼ ë•Œ
2xl: ìµœì†Œê¸¸ì´ê°€ 1536px ì¼ ë•Œ
ì°¸ì¡°
https://tailwindcss.com/docs/responsive-design#overview

-Viewport orientation
portrait: ê°€ë¡œ ëª¨ë“œ ex.portrait:bg-blue-400
landscape: ì„¸ë¡œ ëª¨ë“œ ex.landscape: bg-orange-400
ì°¸ì¡°
https://tailwindcss.com/docs/hover-focus-and-other-states#viewport-orientation



######################
### 4.11 Dark Mode ###
######################
-Dark Mode
Tailwindì—ëŠ” darkëª¨ë“œê°€ í™œì„±í™”ë˜ì–´ ìˆì„ ë•Œ ì‚¬ì´íŠ¸ ìŠ¤íƒ€ì´ì„ ë‹¤ë¥´ê²Œ ì§€ì •í•  ìˆ˜ ìˆëŠ” darkë³€í˜•ì´ í¬í•¨ë˜ì–´ìˆë‹¤.
í˜„ì¬ ì‚¬ìš© ì¤‘ì¸ ìš´ì˜ ì²´ì œ ì„¤ì •ì— ë”°ë¼ darkê°€ ìë™ìœ¼ë¡œ ì ìš©ëœë‹¤.
ex) dark:bg-gray-500
ì°¸ì¡°
https://tailwindcss.com/docs/dark-mode

ìˆ˜ë™ ë‹¤í¬ëª¨ë“œ
ìš´ì˜ ì²´ì œ ê¸°ë³¸ ì„¤ì •ì— ì˜ì¡°í•˜ëŠ” ëŒ€ì‹  ìˆ˜ë™ìœ¼ë¡œ ë‹¤í¬ ëª¨ë“œ ì „í™˜ì„ ì§€ì›í•˜ë ¤ë©´
tailwind.config.jsì—ì„œ ë‹¤í¬ëª¨ë“œ ì„¤ì •ì„ media ëŒ€ì‹  class ë¥¼ ì‚¬ìš©í•´ì•¼í•œë‹¤.

tailwind.config.js
// í´ë˜ìŠ¤ë¥¼ ê¸°ì¤€ìœ¼ë¡œ ë‹¤í¬ëª¨ë“œ ì ìš© ( ìµœìƒìœ„ ë¶€ëª¨ì— darkí´ë˜ìŠ¤ë¥¼ ì§€ì •í•´ì¤˜ì•¼í•œë‹¤. ex.<html className="dark">, <body className="dark"> )
module.exports = {
    ...
    darkMode: "class",
}

// @media(prefers-color-scheme)ë¥¼ ê¸°ì¤€ìœ¼ë¡œ ë‹¤í¬ëª¨ë“œ ì ìš©( ê¸°ë³¸ ê°’ )
module.export = {
    ...
    darkMode: "media",
}
ì°¸ì¡°
https://tailwindcss.com/docs/dark-mode#toggling-dark-mode-manually



##################################
### 4.12 Just In Time Compiler ###
##################################
-Migrating to the JIT engine
TailwindCSS ì—”ì§„
v3.0 ì´ì „: ê±°ëŒ€í•œ CSSíŒŒì¼ì„ ìƒì„±í•˜ê³ , ê·¸ íŒŒì¼ì— ì´ë¯¸ ì •ì˜í•´ë†“ì€ í´ë˜ìŠ¤ë“¤ì„ ê°€ì ¸ì™€ ì‚¬ìš©í•˜ëŠ” ë°©ì‹
ì´ ê²½ìš°ì— ì½”ë“œ ê¸¸ì´ê°€ ê¸¸ê³  í´ë˜ìŠ¤ë¡œ ê°€ë“ì°¬ íŒŒì¼ì„ ê°€ì ¸ì™€ì„œ ê°œë°œë‹¨ê³„ì— ì‚¬ìš©í•˜ê¸° ë•Œë¬¸ì— ë§¤ìš° ë¬´ê²ê³ 
ë°°ë³´ ì „ purgeë¥¼ í•´ì¤˜ì•¼í•˜ëŠ” ë²ˆê±°ë¡œì›€ì´ìˆë‹¤.

v3.0 ì´í›„: ì‚¬ìš©ìê°€ ì‚¬ìš©í•˜ëŠ” ìŠ¤íƒ€ì¼ë“¤ë§Œ ê·¸ë•Œ ê·¸ë•Œ ìƒì„±í•´ì„œ ì‚¬ìš©í•˜ëŠ” ë°©ì‹
ì—¬ëŸ¬ í´ë˜ìŠ¤ë“¤ì„ ì¡°í•©í•´ì„œ ì‚¬ìš©í•  ìˆ˜ ìˆê³ , ë§¤ìš° ê°€ë³ê³ , ë°°í¬ ì „ purgeë¥¼ í•´ì£¼ì§€ ì•Šì•„ë„ëœë‹¤.
ì°¸ì¡°
https://tailwindcss.com/docs/upgrade-guide#migrating-to-the-jit-engine



#############################################
### 5.1 Auth part One - 5.2 Auth part Two ###
#############################################
-Plugins
ì¬ì‚¬ìš© ê°€ëŠ¥í•œ íƒ€ì‚¬ í”ŒëŸ¬ê·¸ì¸ Tailwind í™•ì¥ ê°œìš” í”ŒëŸ¬ê·¸ì¸ì„ ì‚¬ìš©í•˜ë ¤ë©´
CSSëŒ€ì‹  JavaScripteë¥¼ ì‚¬ìš©í•˜ì—¬ ì‚¬ìš©ìì˜ ìŠ¤íƒ€ì¼ì‹œíŠ¸ì— ì‚½ì…í•  Tawilwind ì— ëŒ€í•œ ìŠ¤íƒ€ì¼ì„ ë™ë¡ í•  ìˆ˜ ìˆë‹¤.
ì°¸ì¡°
https://tailwindcss.com/docs/plugins

-@tailwindcss/forms
form ìš”ì†Œë¥¼ ìœ í‹¸ë¦¬í‹°ë¡œ ì‰½ê²Œ ì¬ì •ì˜í•  ìˆ˜ ìˆë„ë¡ í•˜ëŠ” form ìŠ¤íƒ€ì¼ì— ëŒ€í•œ ê¸°ë³¸ ì¬ì„¤ì •ì„ ì œê³µí•˜ëŠ” í”ŒëŸ¬ê·¸
@tailwindcss/forms í”ŒëŸ¬ê·¸ì¸ì€ ìœ í‹¸ë¦¬í‹° í´ë˜ìŠ¤ë¥¼ ì‚¬ìš©í•˜ì—¬ form ìš”ì†Œì˜ ìŠ¤íƒ€ì¼ì„ ì‰½ê²Œ ì§€ì •í•  ìˆ˜ ìˆë„ë¡ í•˜ëŠ” ë…ì°½ì ì¸
form reset layerë¥¼ ì¶”ê°€í•œë‹¤.
ì„¤ì¹˜
npm i -D @tailwindcss/forms

â­í”ŒëŸ¬ê·¸ì¸ì€ ì„¤ì¹˜ í›„ tailwind.config.jsì— pluginsì— ì¶”ê°€í•´ì•¼í•œë‹¤.â­
// tailwind.config.js
module.exports = {
    theme:{
        ...
    },
    plugins:[require("@tailwindcss/forms")],
}
pluginsì•ˆì— require(í”ŒëŸ¬ê·¸ì¸ëª…)ì„ ì¶”ê°€í•œë‹¤.
ì°¸ì¡°
https://tailwindcss.com/docs/plugins#forms



#######################
### 5.3 Home Screen ###
#######################
-Heroicons
TailwindCSSë¡œë¶€í„° ë§Œë“¤ì–´ì§„ ì†ìœ¼ë¡œ ë§Œë“  SVGì•„ì´ì½˜
ì°¸ì¡°
https://heroicons.com/

-Space Between ( space-x, space-y )
ìì‹ ìš”ì†Œ ì‚¬ì´ì˜ ê³µê°„ì„ ì œì–´í•˜ê¸° ìœ„í•œ ìœ í‹¸ë¦¬í‹°.

space-x-{amount} ìœ í‹¸ë¦¬í‹°ë¥¼ ì‚¬ìš©í•˜ì—¬ ìš”ì†Œ ì‚¬ì´ì˜ ìˆ˜í‰ê³µê°„(xì¶•)ì„ ì œì–´í•œë‹¤.
ex) space-x-2
space-y-{amount} ìœ í‹¸ë¦¬í‹°ë¥¼ ì‚¬ìš©í•˜ì—¬ ìš”ì†Œ ì‚¬ì´ì˜ ìˆ˜ì§ê³µê´€(yì¶•)ì„ ì œì–´í•œë‹¤.
ex) space-y-4
ì°¸ì¡°
https://tailwindcss.com/docs/space#add-vertical-space-between-children



#################
### 5.8 Chats ###
#################
-Divide Width
ì—˜ë¦¬ë¨¼íŠ¸ ì‚¬ì´ì˜ border widthë¥¼ ì œì–´í•˜ê¸° ìœ„í•œ ìœ í‹¸ë¦¬ë””
divide-x => border-right-width: 1px; border-left-width: 0px;
divide-x-2 => border-right-width: 2px; border-left-width: 0px;

divide-y => border-top-width: 0px; border-bottom-width: 1px;
divide-y-2 => border-top-width: 0px; border-bottom-width: 2px;
ì°¸ì¡°
https://tailwindcss.com/docs/divide-width



#######################
### 5.9 Chat Detail ###
#######################
-Top/Right/Bottom/left
positionedëœ ìš”ì†Œì˜ ë°°ì¹˜ë¥¼ ì œì–´í•˜ê¸° ìœ„í•œ ìœ í‹¸ë¦¬í‹°

ex) inset-x-0 => left: 0px; right: 0px;
    inset-x-2 => left: 0.5rem; /* 8px */ right: 0.5rem; /* 8px */

    inset-y-0 => top: 0px; bottom: 0px;
    inset-y-2 => top: 0.5rem; /* 8px */ bottom: 0.5rem; /* 8px */
ì°¸ì¡°
https://tailwindcss.com/docs/top-right-bottom-left



####################
### 5.13 Streams ###
####################
-Aspect Ratio
ìš”ì†Œì˜ ì¢…íš¡ë¹„ë¥¼ ì œì–´í•˜ê¸° ìœ„í•œ ìœ í‹¸ë¦¬í‹°
ë˜ëŠ” ëŒ€ê´„í˜¸ë¥¼ ì‚¬ìš©í•˜ì—¬ ìƒˆë¡œìš´ ì†ì„±ì„ ìƒì„±í•  ìˆ˜ ìˆë‹¤.

ex) aspect-auto => aspect-ratio: auot;
    aspect-square => aspect-ratio: 1/1;
    aspect-video => aspect-ratio: 16/9;
-aspect-ratio CSS
ì¢…íš¡ë¹„ CSSì†ì„±ì€ ìë™ í¬ê¸° ë° ê¸°íƒ€ ë ˆì´ì•„ì›ƒ ê¸°ëŠ¥ ê³„ì‚°ì— ì‚¬ìš©ë˜ëŠ” ìƒìì˜ ê¸°ë³¸ ì¢…íš¡ë¹„ë¥¼ ì„¤ì •í•œë‹¤.
ì°¸ì¡°
https://tailwindcss.com/docs/aspect-ratio
https://developer.mozilla.org/en-US/docs/Web/CSS/aspect-ratio



###########################
### 5.14 Streams Detail ###
###########################
-overflow scrollbar hide
global.css
body{
    -ms-overflow-style: none;
}
::-webkit-scrollbar {
    display: none;
}
ì¶”ê°€í•œë‹¤.



###################################################
### 5.16 Layout part One - 5.17 Layout part Two ###
###################################################
-Max-Width
ìš”ì†Œì˜ ìµœëŒ€ ë„ˆë¹„ë¥¼ ì„¤ì •í•˜ëŠ” ìœ í‹¸ë¦¬í‹°.
ex) max-w-none => max-width: none;
    max-w-xs => max-width: 20rem; /* 320px */
    max-w-sm => max-width: 24rem; /* 384px */
    max-w-md => max-width: 28rem; /* 448px */
    max-w-lg => max-width: 32rem; /* 512px */
    max-w-full => max-width: 100%;
    max-w-screen-sm => max-width: 640px;
    max-w-screen-md => max-width: 768px;
    max-w-screen-lg => max-width: 1024px;
    max-w-screen-xl => max-width: 1280px;
ëŒ€ê´„í˜¸ë¥¼ ì‚¬ìš©í•˜ì—¬ ì„ì˜ì˜ ê°’ì„ ì‚¬ìš©í•˜ì—¬ ì¦‰ì‹œ ì†ì„±ì„ ìƒì„±í•  ìˆ˜ë„ ìˆë‹¤.
div class="max-w-[50%]"
ì°¸ì¡°
https://tailwindcss.com/docs/max-width

-Heroicons
https://heroicons.com/

-router.back()
historyë¡œ navigateí•©ë‹ˆë‹¤. ë¸Œë¼ìš°ì €ì˜ ë’¤ë¡œ ë²„íŠ¼ì„ í´ë¦­í•˜ëŠ” ê²ƒê³¼ ê°™ìŠµë‹ˆë‹¤. window.history.back()ì„ ì‹¤í–‰í•œë‹¤.
ì°¸ì¡°
https://nextjs.org/docs/api-reference/next/router#routerback

-router.push()
í´ë¼ì´ì–¸íŠ¸ ì¸¡ ì „í™˜ì„ ì²˜ë¦¬í•©ë‹ˆë‹¤. ì™¸ë¶€ URLì— ëŒ€í•´ router.pushë¥¼ ì‚¬ìš©í•  í•„ìš”ê°€ ì—†ìŠµë‹ˆë‹¤. window.locationì€ ì´ëŸ¬í•œ ê²½ìš°ì— ë” ì í•©í•©ë‹¤.
ì°¸ì¡°
https://nextjs.org/docs/api-reference/next/router#routerpush



###########################
### 6.1 What is Prisma ###
###########################
-Prisma
Node.js and TypeScript ORM ( Object Relational Mapping )
JS or TS ì™€ DB ì‚¬ì´ì— ë‹¤ë¦¬ë¥¼ ë†“ì•„ì¤Œ ( ë²ˆì—­ê¸° ì—­í• ì„ í•œë‹¤ê³  ìƒê°í•˜ë©´ëœë‹¤. )

Prismaë¥¼ ì‚¬ìš©í•˜ê¸° ìœ„í•´ì„œëŠ” ë¨¼ì € Prismaì—ê²Œ DBê°€ ì–´ë–»ê²Œ ìƒê²¼ëŠ”ì§€
ë°ì´í„°ì˜ ëª¨ì–‘ì„ ì„¤ëª…í•´ì•¼í•œë‹¤.
=> Schema.Prisma

Prismaê°€ ì´ëŸ° íƒ€ì…ì— ê´€í•œ ì •ë³´ë¥¼ ì•Œê³  ìˆìœ¼ë©´ clientë¥¼ ìƒì„±í•´ì¤„ ìˆ˜ ìˆìŒ
clientë¥¼ ì´ìš©í•˜ë©´ TSë¡œ DBì™€ ì§ì ‘ ìƒí˜¸ì‘ìš©ì´ ê°€ëŠ¥í•˜ê³  ìë™ì™„ì„± ì œê³µí•˜ëŠ”

Prisma Studio : Visual Database Browser, DBë¥¼ ìœ„í•œ ê´€ë¦¬ì íŒ¨ë„ê°™ì€ ê²ƒì´ë‹¤.

PrismaëŠ” ê°œë°œìê°€ PostgreSQL, MySQL, SQL Server, SQLite, MongoDB ì˜¤í”ˆ ì†ŒìŠ¤ ë°ì´í„°ë² ì´ìŠ¤ ë„êµ¬ë¥¼
ì‚¬ìš©í•˜ì—¬ ë” ë¹ ë¥´ê²Œ ë¹Œë“œí•˜ê³  ì˜¤ë¥˜ë¥¼ ì¤„ì´ëŠ”ë° ë„ì›€ì„ ì¤€ë‹¤
ì°¸ì¡°
- https://www.prisma.io/



########################
### 6.2 Prisma Setup ###
########################
-Prisma ì„¤ì¹˜
1. npm i prisma -D
2. npx prisma init
ì´ ëª…ë ¹ì€ schema.prismaë¼ëŠ” íŒŒì¼ê³¼ í”„ë¡œì íŠ¸ ë£¨íŠ¸ì— .envíŒŒì¼ì„ í¬í•¨í•˜ì—¬ prismaë¼ëŠ” ìƒˆ ë””ë ‰í† ë¦¬ë¥¼ ìƒì„±í•œë‹¤.
schema.prismaëŠ” ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²°ê³¼ Prisma Client ìƒì„±ê¸°ê°€ ìˆëŠ” Prisma ìŠ¤í‚¤ë§ˆë¥¼ í¬í•¨í•œë‹¤.
.envëŠ” í™˜ê²½ ë³€ìˆ˜ë¥¼ ì •ì˜í•˜ê¸° ìœ„í•œ dotenv íŒŒì¼ì´ë‹¤.( DBë¥¼ ì—°ê²°í•  ë•Œ ì‚¬ìš©ëœë‹¤. )
schema.prisma íŒŒì¼ì—ì„œ
ex) datasource db {
        provider = "mysql"
        url      = env("DATABASE_URL")
    }
    providerë¥¼ ì‚¬ìš©í•  DBë¡œ ë°”ê¿”ì•¼í•œë‹¤.

-ì°¸ì¡°
https://www.prisma.io/docs/getting-started/setup-prisma/start-from-scratch/relational-databases-typescript-mysql
-Prisma Model ì˜ˆì‹œ
https://www.prisma.io/docs/concepts/components/prisma-schema
-VSCode Prisma Extension
https://marketplace.visualstudio.com/items?itemName=Prisma.prisma



###############################
### 6.3 What is PlanetScale ###
###############################
-PlanetScale
MySQLí˜¸í™˜ Serverless ë°ì´ë²„ë² ì´ìŠ¤ í”Œë«í¼
https://planetscale.com/

-Vitess
VitessëŠ” MySQLì„ ìŠ¤ì¼€ì¼ë§í•˜ê¸° ìœ„í•œ ë°ì´í„°ë² ì´ìŠ¤ í´ëŸ¬ìŠ¤í„°ë§ ì‹œìŠ¤í…œì˜
ì¸í„°ë„·ì—ì„œ ê°€ì¥ í° ì‚¬ì´íŠ¸ë¥¼ í˜¸ìŠ¤íŒ…í•˜ëŠ” ê°•ë ¥í•œ ì˜¤í”ˆ ì†ŒìŠ¤ ê¸°ìˆ ì´ë‹¤
https://vitess.io/

Vitess ì¥ì 
- ìˆ˜í‰ ìŠ¤ì¼€ì¼
- ê³ ê°€ìš©ì„±( ê¸°ë³¸ ë³µì œë³¸ êµ¬ì„±ì€ ì˜ˆê¸°ì¹˜ ì•Šì€ ì´ë²¤íŠ¸ê°€ ë°œìƒì‹œ ê¸°ë³¸ì—ì„œ ë³µì œë³¸ìœ¼ë¡œ ì›í™œí•œ ì¥ì• ì¡°ì¹˜ë¥¼ í—ˆìš© )
- MySQLí˜¸í™˜
- ì¿ ë²„ë„¤í‹°ìŠ¤ ë„¤ì´í‹°ë¸Œ
- êµ¬ì²´í™”ëœ ë·°
- ì˜¨ë¼ì¸ ìŠ¤í‚¤ë§ˆ ë§ˆì´ê·¸ë ˆì´ì…˜



#####################################
### 6.4 Connecting to PlanetScale ###
#####################################
-PlanetScale CLI
PlanetScaleì€ ë°ì´í„°ë² ì´ìŠ¤ ì´ìƒì´ë©° CLIëŠ” ë³µì¡í•œ ëª…ë ¹ ì´ìƒì´ë‹¤.
pscale ì»¤ë§¨ë“œ ë¼ì¸ì„ ì‚¬ìš©í•˜ì—¬ branch, deployìš”ì²­ ë° ê¸°íƒ€ PlanetScale ê°œë…ì„ ì†ì‰½ê²Œ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.
ì°¸ì¡°
https://github.com/planetscale/cli

PlanetScale CLI ì„¤ì¹˜(ìœˆë„ìš°)
1.Scoopì„¤ì¹˜ (ìœˆë„ìš°ìš© ì»¤ë§¨ë“œ ë¼ì¸ ì„¤ì¹˜ í”„ë¡œê·¸ë¨)
- https://scoop.sh/
2.scoop bucket add pscale https://github.com/planetscale/scoop-bucket.git
3.scoop install pscale mysql
4.scoop update pscale

PlanetScale CLIë¥¼ ì‚¬ìš©í•˜ì—¬ ë°ì´í„°ë² ì´ìŠ¤
ìƒì„±
pscale database create ## DB NAME ## --region ap-northeast
ì—°ê²°
pscale connect carrot-market
â­ì»¤ë§¨ë“œì°½ì„ ì¢…ë£Œí•˜ë©´ ì•ˆëœë‹¤.

ì—°ê²°ì‹œ ë‚˜ì˜¤ëŠ” URLì„ .env íŒŒì¼ì— ì ìš©í•˜ê¸°
ex) DATABASE_URL="mysql://127.0.0.1.@@@@/DB NAME"

PlanetScale ì¸ì¦
pscale auth login



###############################
### 6.5 Push To PlanetScale ###
###############################
-Prisma Client and schema preview features
Prisma Client ë° Prisma ìŠ¤í‚¤ë§ˆì— ëŒ€í•´ Preview features í”Œë˜ê·¸ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.
ì°¸ì¡°
https://www.prisma.io/docs/concepts/components/preview-features/client-preview-features\

-Referential integrity (ì°¸ì¡° ë¬´ê²°ì„±)
ì–´ë–¤ ë‹¤ë¥¸ ëª¨ë¸ì„ ì°¸ì¡°í•˜ëŠ” ê²½ìš° í•´ë‹¹ ëª¨ë¸ì´ ë°˜ë“œì‹œ ì¡´ì¬í•´ì•¼í•œë‹¤.
ì°¸ì¡° ë¬´ê²°ì„±ì€ ëª¨ë“  ì°¸ì¡°ê°€ ìœ íš¨í•¨ì„ ë‚˜íƒ€ë‚´ëŠ” ë°ì´í„° ì„¸íŠ¸ì˜ ì†ì„±ì´ë‹¤.
ì°¸ì¡° ë¬´ê²°ì„±ì„ ìœ„í•´ì„œëŠ” í•œ ë ˆì½”ë“œê°€ ë‹¤ë¥¸ ë ˆì½”ë“œë¥¼ ì°¸ì¡°í•˜ëŠ” ê²½ìš° ë°˜ë“œì‹œ í•´ë‹¹ ì°¸ì¡°í•˜ëŠ” ë ˆì½”ë“œê°€ ì¡´ì¬í•´ì•¼ í•œë‹¤.
ex) Postëª¨ë¸ì´ userí•„ë“œë¥¼ ì •ì˜í•˜ëŠ” ê²½ìš° User(ëª¨ë¸)ë„ ë°˜ë“œì‹œ ì¡´ì¬í•´ì•¼í•œë‹¤.
ì°¸ì¡°
https://www.prisma.io/docs/concepts/components/prisma-schema/relations/referential-integrity

-datasourceì—ì„œ referential integrity ì„¤ì •
í™œì„±í™”
schema.prisma
generator client {
  provider        = "prisma-client-js"
  previewFeatures = ["referentialIntegrity"]    <-- this.line
}

datasource db {
  provider             = "mysql"
  url                  = env("DATABASE_URL")
  referentialIntegrity = "prisma"               <-- this.line
}
ë‘ ë¼ì¸ì„ ì¶”ê°€í•´ì„œ í™œì„±í™”í•´ì•¼ ì°¸ì¡°ë¬´ê²°ì„±ì—¬ë¶€ í™•ì¸

ì°¸ì¡°
https://www.prisma.io/docs/concepts/components/prisma-schema/relations/referential-integrity#setting-the-referential-integrity-in-the-datasource

-db push
db pushëŠ” Prisma Migrateì™€ ë™ì¼í•œ ì—”ì§„ì„ ì‚¬ìš©í•˜ì—¬ Prisma ìŠ¤í‚¤ë§ˆë¥¼ DBìŠ¤í‚¤ë§ˆì™€ ë™ê¸°í™”í•˜ì—¬ ìŠ¤í‚¤ë§ˆ í”„ë¡œí†  íƒ€ì´ë°ì— ê°€ì¥ ì í•©
ex) npx prisma db push

ì°¸ì¡°
https://www.prisma.io/docs/concepts/components/prisma-migrate/db-push



#########################
### 6.6 Prisma Client ###
#########################
-Prisma Client
TypeScript ë° Node.jsìš© ì§ê´€ì ì¸ ë°ì´í„°ë² ì´ìŠ¤ í´ë¼ì´ì–¸íŠ¸
Prisma ClientëŠ” ìƒê°í•˜ëŠ” ë°©ì‹ìœ¼ë¡œ êµ¬ì„±í•˜ê³  ì•±ì— ë§ì¶¤í™”ëœ ìœ í˜•ìœ¼ë¡œ PrismaìŠ¤í‚¤ë§ˆì—ì„œ ìë™ ìƒì„±ë˜ëŠ” ì¿¼ë¦¬ ë¹Œë”ì´ë‹¤.
ì§ê´€ì ì¸ APIë¡œ ì„¤ê³„ë˜ì–´ìˆë‹¤.

npm install prisma --save-dev
npx prisma

npm install @prisma/client
ex) import { PrismaClient } from '@prisma/client'
    const prisma = new PrismaClient()

    const newUser = awaut prisma.user.create({
        data:{
            email: "hi@naver.com",
            name" "hello",
        }
    })

â— Prisma ClientëŠ” í”„ë¡ íŠ¸ì—”ë“œì—ì„œëŠ” ë³´ì•ˆë¬¸ì œë¡œ ì‘ë™í•˜ì§€ ì•Šê³  ì„œë²„ì—ì„œë§Œ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤. â—



######################
### 6.7 API Routes ###
######################
-API Routes
API RoutesëŠ” NextJSë¡œ APIë¥¼ ë¹Œë“œí•˜ê¸° ìœ„í•œ ì†”ë£¨ì…˜ì„ ì œê³µí•œë‹¤.
pages/api í´ë” ë‚´ì˜ ëª¨ë“  íŒŒì¼ì€ /api/*ì— ë§¤í•‘ë˜ë©° API endpointë¡œ ì²˜ë¦¬ë©ë‹ˆë‹¤.
sever-side ì „ìš© ë²ˆë“¤ì´ë©° client-sideë²ˆë“¤ í¬ê¸°ë¥¼ ëŠ˜ë¦¬ì§€ ì•ŠëŠ”ë‹¤.

req: http.IncomingMessageì˜ ì¸ìŠ¤í„´ìŠ¤ì™€ pre-builtëœ ì¼ë¶€ ë¯¸ë“¤ì›¨ì–´
res: http.ServerResponseì˜ ì¸ìŠ¤í„´ìŠ¤ì™€ ì¼ë¶€ helperí•¨ìˆ˜
ex) ë‹¤ìŒ API ê²½ë¡œ pages/api/user.jsëŠ” ìƒíƒœ ì½”ë“œê°€ 200ì¸ json ì‘ë‹µì„ ë°˜í™˜í•©ë‹ˆë‹¤.
    export default function handler(
        req: NextApiRequest, 
        res: NextApiResponse,
    ){
        res.status(200).json({ name : 'John Doe' })
    }
ì°¸ì¡°
https://nextjs.org/docs/api-routes/introduction



############################################
### 7.0 Introduction ( React Hook Form ) ###
############################################
-React Hook Form
ì‚¬ìš©í•˜ê¸° ì‰¬ìš´ ìœ íš¨ì„± ê²€ì‚¬ë¥¼ í†µí•´ ì„±ëŠ¥ì´ ë›°ì–´ë‚˜ê³  ìœ ì—°í•˜ë©° í™•ì¥ ê°€ëŠ¥í•œ formì´ë‹¤
ì°¸ì¡°
https://react-hook-form.com/



##############################
### 7.1 Making Forms Alone ###
##############################
-React Hook Formì„¤ì¹˜
í˜„ì¬ react18 rc ë²„ì „ 
npm i react-hook-form --legacy-peer-deps

react18 ì •ì‹ ì¶œì‹œ í›„ react hook formë„ ì—…ë°ì´íŠ¸ ì™„ë£Œì‹œ
npm i react-hook-form

ì°¸ì¡°
https://react-hook-form.com/get-started
https://www.npmjs.com/package/react-hook-form



#################################
### 7.2 The Register Function ###
#################################
-Register
register:(name: string, RegisterOptions?) => ({onChange, onBlur, name, ref})
ì´ ë©”ì†Œë“œë¥¼ ì‚¬ìš©í•˜ë©´ inputì„ ë“±ë¡í•˜ê±°ë‚˜ ì—˜ë¦¬ë¨¼íŠ¸ë¥¼ ì„ íƒí•˜ê³  React Hook Formì— ìœ íš¨ì„± ê²€ì‚¬ ê·œì¹™ì„ ì ìš©í•  ìˆ˜ ìˆë‹¤.
ìœ íš¨ì„± ê²€ì‚¬ ê·œì¹™ì€ ëª¨ë‘ HTMLí‘œì¤€ì„ ê¸°ë°˜ìœ¼ë¡œ í•˜ë©° ì‚¬ìš©ì ì§€ì • ìœ íš¨ì„± ê²€ì‚¬ ë°©ë²•ë„ í—ˆìš©í•œë‹¤.
ex) import { useForm } from 'react-hook-form';
    const { register, handleSubmit } = useForm();

    <input 
        {...register("firstName", {required : true })}
        placeholder="First Name"
    />
ì°¸ì¡°
https://react-hook-form.com/api/useform/register



################################################
### 7.3 Validation - 7.4 Validation part Two ###
################################################
-register ì˜µì…˜
required : string | { value : boolean, message : string }
minLength : number | { value : number, message : string }
ex) <input 
        {...register("test",{
            required : 'erroe message;,
        })}
    />
    <input 
        {...register("test",{
            minLength:{
                message : "5ìì´í•˜ì…ë‹ˆë‹¤.",
                value : 5,
            }
        })}
    />
ì°¸ì¡°
https://react-hook-form.com/api/useform/register

-handleSubmit
ì´ í•¨ìˆ˜ëŠ” form ìœ íš¨ì„± ê²€ì‚¬ê°€ ì„±ê³µí•˜ë©´ form ë°ì´í„°ë¥¼ ìˆ˜ì‹ í•œë‹¤.
ex) form onSubmit={ handleSubmit( onSubmit, onError ) }

onSubmit( SubmitHandler ) <-- ì„±ê³µì‹œ ì½œë°±
(data : Object, e?: Event ) => void

onError( SubmitErrorHandler ) <-- ì—ëŸ¬ ì½œë°±
(errors : Object, e?: Event ) => void
ì°¸ì¡°
https://react-hook-form.com/api/useform/handlesubmit



##################
### 7.5 Errors ###
##################
-validate
ìœ íš¨ì„±ì„ ê²€ì‚¬í•  ì¸ìˆ˜ë¡œ ì½œë°± í•¨ìˆ˜ë¥¼ ì „ë‹¬í•˜ê±°ë‚˜ ì½œë°± í•¨ìˆ˜ì˜ ê°œì²´ë¥¼ ì „ë‹¬í•˜ë©° ëª¨ë“  ìœ íš¨ì„±ì„ ê²€ì‚¬í•  ìˆ˜ ìˆë‹¤.
ex) <input
        {...register("test", {
            validate : value => value === '1'
        })}
    />
ex2)<input
        {...register("email", {
            required : "Email is required",
            validate : {
                checkGamil : (value) => !value.inclueds("@gmail.com") ? "" : "Gmail is not allowed",
            }
        })}  
    />
ì°¸ì¡°
https://react-hook-form.com/api/useform/register/

-mode
mode: onChange | onBlur | onSubmit | onTouched | all = 'onSubmit'
ì´ ì˜µì…˜ì„ ì‚¬ìš©í•˜ë©´ ì‚¬ìš©ìê°€ formì„ ì œì¶œí•˜ê¸° ì „ì— ìœ íš¨ì„± ê²€ì‚¬ë¥¼ í•  ìˆ˜ ìˆë‹¤.
onTouched
ìœ íš¨ì„± ê²€ì‚¬ëŠ” ì²« ë²ˆì§¸ blur ì´ë²¤íŠ¸ì—ì„œ íŠ¸ë¦¬ê±°ë©ë‹ˆë‹¤. ê·¸ í›„ì—ëŠ” ëª¨ë“  change ì´ë²¤íŠ¸ì—ì„œ íŠ¸ë¦¬ê±°ë©ë‹ˆë‹¤.
all
blur ë° change ì´ë²¤íŠ¸ì—ì„œ ìœ íš¨ì„± ê²€ì‚¬ê°€ íŠ¸ë¦¬ê±°ë©ë‹ˆë‹¤.
ì°¸ì¡°
https://react-hook-form.com/api/useform#props



##################
### 7.6 Extras ###
##################
-setError()
ì´ í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•˜ë©´ í•˜ë‚˜ ì´ìƒì˜ ì˜¤ë¥˜ë¥¼ ìˆ˜ë™ìœ¼ë¡œ ì„¤ì •í•  ìˆ˜ ìˆë‹¤.
ex) setError("username",{
        type:"manual",
        message" "Username Error",
    })
ì°¸ì¡°
https://react-hook-form.com/api/useform/seterror

-reset()
ì „ì²´ form state ë˜ëŠ” form stateì˜ ì¼ë¶€ë¥¼ ë¦¬ì…‹í•œë‹¤.
 formì—ì„œ submití›„, ì „ì²´ input ì´ˆê¸°í™”
 ì°¸ì¡°
 https://react-hook-form.com/api/useform/reset

 -resetField()
 ê°œë³„ field stateë¥¼ ì¬ì„¤ì •í•œë‹¤.
 formì—ì„œ submití›„, íŠ¹ì • inputë§Œ ì´ˆê¸°í™”
 ì°¸ì¡°
 https://react-hook-form.com/api/useform/resetfield



######################
### 8.0 Enter Form ###
######################
-Type-Only Imports and Exports
import typeì€ íƒ€ì… í‘œê¸°ì™€ ì„ ì–¸ì— ì‚¬ìš©ë  ì„ ì–¸ë§Œ import, exportí•œë‹¤.
ëŸ°íƒ€ì„ì—ì„œëŠ” ì™„ì „íˆ ì§€ì›Œì§„ë‹¤.
ë§ˆì°¬ê°€ì§€ë¡œ export typeì€ íƒ€ì… ë¬¸ë§¥ì— ì‚¬ìš©í•  exportë§Œ ì œê³µ ì´ ë˜í•œ TypeScriptì˜ ì¶œë ¥ë¬¼ì—ì„œ ì œê±°ë©ë‹ˆë‹¤.
Typescript 3.8ì— ì¶”ê°€ëœ ê²ƒìœ¼ë¡œ ì •í™•í•˜ê²Œ typeë§Œ import, exportí•˜ë„ë¡ ëª…ì‹œ í•  ìˆ˜ ìˆë‹¤.

ex) import type { user } from './hello';
    export type { user };
    import type { UseFormRegisterReturn } from "react-hook-form";
ì°¸ì¡°
https://www.typescriptlang.org/ko/docs/handbook/release-notes/typescript-3-8.html



###########################
### 8.1 Form Submission ###
###########################
-Uploading JSON data
POSTí”„ë¡œí† ì½œë¡œ JSONì¸ì½”ë”©ëœ ë°ì´í„°ë¥¼ ë³´ë‚´ê¸° ìœ„í•´ fetch()ë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤.
ex) await fetch(url, {
        method: 'POST', // or 'PUT'
        body: JSON.stringify(data), // data can be `string` or {object}!
        headers:{
            'Content-Type': 'application/json'
        }
    })
ì°¸ì¡°
https://developer.mozilla.org/ko/docs/Web/API/Fetch_API/Using_Fetch#uploading_json_data



#######################
### 8.4 withHandler ###
#######################
-HTTP ìƒíƒœì½”ë“œ
200 OK : ìš”ì²­ ì„±ê³µ
400 Bad Request : ì´ ì‘ë‹µì€ ì˜ëª»ëœ ë¬¸ë²•ìœ¼ë¡œ ì¸í•˜ì—¬ ì„œë²„ê°€ ìš”ì²­ì„ ì´í•´í•  ìˆ˜ ì—†ìŒì„ ì˜ë¯¸ ( Clientê°€ Requestí•  ë•Œ ë°œìƒí•œ ë¬¸ì œ )
403 Forbidden : ClientëŠ” ì½˜í…ì¸ ì— ì ‘ê·¼í•  ê¶Œë¦¬ë¥¼ ê°€ì§€ê³  ìˆì§€ ì•ŠìŠµë‹ˆë‹¤. 401ê³¼ ë‹¤ë¥¸ ì ì€ Serverê°€ Clientê°€ ëˆ„êµ¬ì¸ì§€ ì•Œê³  ìˆë‹¤.
405 Method Not Allowed : ìš”ì²­í•œ ë©”ì†Œë“œë¥¼ Serverì—ì„œ ì•Œê³  ìˆì§€ë§Œ, ì œê±°ë˜ì—ˆê³  ì‚¬ìš©í•  ìˆ˜ ì—†ë‹¤. ( í—ˆìš©ë˜ì§€ì•Šì€ ë©”ì†Œë“œ ì‚¬ìš© )
500 Internal Server Error : Serverê°€ ì²˜ë¦¬ ë°©ë²•ì„ ëª¨ë¥´ëŠ” ìƒí™©ì´ ë°œìƒ. ì„œë²„ëŠ” ì•„ì§ ì²˜ë¦¬ ë°©ë²•ì„ ì•Œ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.
ì°¸ì¡°
https://developer.mozilla.org/ko/docs/Web/HTTP/Status

-ê³ ì°¨í•¨ìˆ˜ HOF(Higher Order Function)
í•˜ë‚˜ ì´ìƒì˜ í•¨ìˆ˜ë¥¼ ì¸ìë¡œ ë°›ê³ , ê²°ê³¼ë¡œ í•¨ìˆ˜ë¥¼ ë¦¬í„´í•œë‹¤.
ë‹¤ì‹œ ë§í•´ í•¨ìˆ˜ê°€ ë˜ í•˜ë‚˜ì˜ í•¨ìˆ˜ë¥¼ ë‹¤ë£¨ëŠ” í•¨ìˆ˜ì´ë‹¤.
HOFë¥¼ ì´ìš©í•´ì„œ JSì—ì„œ í•¨ìˆ˜í˜• í”„ë¡œê·¸ë˜ë°ì„ ë‹¤ë£° ìˆ˜ ìˆìŠµë‹ˆë‹¤.

// í•¨ìˆ˜ê°€ ë˜ ë‹¤ë¥¸ í•¨ìˆ˜ë¥¼ ë¦¬í„´í•˜ëŠ” êµ¬ì¡°
ex) const add = function(x) {
        return function(y) {
        return x+y;
        }
    }
    const sum = add(2)(3); // 5
ì°¸ì¡°
https://javascript-1.gitbook.io/javascript/hof-higher-order-function



#################
### 8.5 Paths ###
#################
-baseUrl
ê¸°ë³¸ ë””ë ‰í† ë¦¬ë¥¼ ì„¤ì • í•  ìˆ˜ ìˆë‹¤. ( ë£¨íŠ¸ í´ë”ë¥¼ ì •ì˜ )
ì´ í”„ë¡œì íŠ¸ ë‚´ì—ì„œ "baseUrl" : "."ì„ ì‚¬ìš©í•œ TSëŠ” tsconfig.jsonê³¼ ë™ì¼í•œ í´ë”ì—ì„œ ì‹œì‘í•˜ëŠ” íŒŒì¼ì„ ì°¾ëŠ”ë‹¤.
"../" ë˜ëŠ” "./"ë¡œ íŒŒì¼ì„ importí•´ì˜¤ëŠ” ê²ƒì´ ì§€ê²¹ë‹¤ë©´ ì´ ë¬¸ì œë¥¼ í•´ê²°í•  ìˆ˜ ìˆëŠ” ì¢‹ì€ ë°©ë²•ì´ë‹¤.
ì°¸ì¡°
https://www.typescriptlang.org/tsconfig#baseUrl

-paths
íŒŒì¼ì„ importí•´ì˜¤ëŠ” ê²½ë¡œë¥¼ ë‹¤ì‹œ ë§¤í•‘í•œë‹¤.
ì´ íŒ¨í„´ì€ ì½”ë“œë² ì´ìŠ¤ ë‚´ì—ì„œ ê¸´ ìƒëŒ€ ê²½ë¡œë¥¼ í”¼í•˜ëŠ”ë° ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.
ex) "paths": {
        "app/*": ["app/*"],
        "config/*": ["app/_config/*"],
        "environment/*": ["environments/*"],
        "shared/*": ["app/_shared/*"],
        "helpers/*": ["helpers/*"],
        "tests/*": ["tests/*"],
        â†“â†“â†“ â†“ë‚´ í”„ë¡œì íŠ¸ì—ì„œ ì˜ˆì‹œ ì‚¬ìš©ë²•
        "@libs/*":["libs/*"],
        "@components/*":["components/*"]
    },
ì°¸ì¡°
https://www.typescriptlang.org/tsconfig#paths

tsconfig ì„¤ì • ì˜µì…˜
https://www.typescriptlang.org/tsconfig



##########################
### 9.1 Accounts Logic ###
##########################
-Update or Create Records ( upsert )
upsert()ëŠ” ê¸°ì¡´ ë°ì´í„°ë¥¼ ì—…ë°ì´íŠ¸í•˜ê±°ë‚˜ ìƒˆ ë°ì´í„°ë² ì´ìŠ¤ ë ˆì½”ë“œë¥¼ ìƒì„±í•œë‹¤.
ex_1) 
ë‹¤ìŒ ì¿¼ë¦¬ëŠ”  upsertë¥¼ ì‚¬ìš©í•˜ì—¬ íŠ¹ì • ì´ë©”ì¼ ì£¼ì†Œë¡œ ì‚¬ìš©ì ë ˆì½”ë“œë¥¼ ì—…ë°ì´íŠ¸ í•˜ê±°ë‚˜, 
ì¡´ì¬í•˜ì§€ ì•Šì„ ê²½ìš° í•´ë‹¹ ì‚¬ìš©ìì˜ ë ˆì½”ë“œë¥¼ ìƒì„±í•œë‹¤.
const upsertUser = await prisma.user.upsert({
    where: {
    email: 'hello@gmail.com',
    },
    update: {
    name: 'pizza',
    },
    create: {
    email: 'hello@gmail.com',
    name: 'pizza',
    },
})

ex_2)
â†“â†“â†“ â†“ë‚´ í”„ë¡œì íŠ¸ì—ì„œ ì‚¬ìš©ë²• /api/users/enter
const user = await client.user.upsert({
    where : {
        ...enterType,
    },
    create : {
        name: "@@@",
        ...enterType,
    },
    update : {

    },
})
ì°¸ì¡°
https://www.prisma.io/docs/concepts/components/prisma-client/crud#update-or-create-records
https://www.prisma.io/docs/reference/api-reference/prisma-client-reference#upsert



#######################
### 9.2 Token Logic ###
#######################
-connect
connect ì¿¼ë¦¬ëŠ” ID ë˜ëŠ” ê³ ìœ  ì‹ë³„ìë¥¼ ì§€ì •í•˜ì—¬ ë ˆì½”ë“œë¥¼ ê¸°ì¡´ relation ë ˆì½”ë“œì— ì—°ê²°í•œë‹¤. ( ë ˆì½”ë“œë¥¼ ì—°ê²° )
ì°¸ì¡°
https://www.prisma.io/docs/reference/api-reference/prisma-client-reference#connect

-conncetOrCreate
conncetOrCreateëŠ” ID ë˜ëŠ” ê³ ìœ  ì‹ë³„ìë¡œ ê¸°ì¡´ ê´€ë ¨ ë ˆì½”ë“œì— ë ˆì½”ë“œë¥¼ ì—°ê²°í•˜ê±°ë‚˜ ë ˆì½”ë“œê°€ ì¡´ì¬í•˜ì§€ ì•ŠëŠ” ê²½ìš° ìƒˆ ê´€ë ¨ ë ˆì½”ë“œë¥¼ ìƒì„±
ex_1) 
tag: {
    conncetOrCreate:{
        create:{
            name: 'ABCD',
        },
        where: {
            name: 'ABCD',
        },
    },
},
ex_2) 
â†“â†“â†“â†“ ë‚´ í”„ë¡œì íŠ¸ì—ì„œ ì‚¬ìš©ë²• /api/users/enter
const token = await client.token.create({
    data: {
        payload,
        user: {
            connectOrCreate: {
                where: {
                    ...enterType,
                },
                create: {
                    name: "user1",
                    ...enterType,
                },
            },
        },
    },
});
ì°¸ì¡°
https://www.prisma.io/docs/reference/api-reference/prisma-client-reference#connectorcreate



#######################
### 9.3 Twilo Setup ###
#######################
-Twilio
TwilioëŠ” ì „í™” ê±¸ê¸° ë° ë°›ê¸°, ë¬¸ì ë©”ì‹œì§€ ë³´ë‚´ê¸° ë° ë°›ê¸°, ì›¹ ì„œë¹„ìŠ¤ APIë¥¼ ì‚¬ìš©í•˜ì—¬ ê¸°íƒ€ ì»¤ë®¤ë‹ˆì¼€ì´ì…˜ ê¸°ëŠ¥ ìˆ˜í–‰ì„ ìœ„í•œ
í”„ë¡œê·¸ë˜ë° ê°€ëŠ¥í•œ ì»¤ë®¤ë‹ˆì¼€ì´ì…˜ ë„êµ¬ë¥¼ ì œê³µí•œë‹¤.
ì°¸ì¡°
https://www.twilio.com/
Twilo Document
https://www.twilio.com/docs



#######################
### 9.4 Sending SMS ###
#######################
-twilio ì„¤ì¹˜
npm i twilio
Twilioì˜ ë©”ì‹œì§• ì±„ë„ì„ ì‚¬ìš©í•˜ì—¬ ì „ì†¡ëœ ëª¨ë“  ë©”ì‹œì§•ì€ A2P( Application-to-Person ) ë©”ì‹œì§•ìœ¼ë¡œ ì·¨ê¸‰ë˜ë©°
Twilioì˜ ë©”ì‹œì§• ì •ì±…ì´ ì ìš©ëœë‹¤.
ëª‡ ì¤„ì˜ ì½”ë“œë¡œ Node.js ì–´í”Œë¦¬ì¼€ì´ì…˜ì—ì„œ Twilio Programmable SMSë¡œ ë¬¸ì ë©”ì‹œì§€ë¥¼ ë³´ë‚´ê³  ë°›ì„ ìˆ˜ ìˆë‹¤.
ex) 
import twilio from "twilio";
const twilioClient = twilio(
    process.env.TWILIO_SID, process.env.TWILIO_TOKEN
);

twilioClient.messages.create({
    messagingServiceSid: process.env.TWILIO_MSID,
    to: process.env.TWILIO_MY_PHONE!,
    body: `Here is message content`,
});

.env í™˜ê²½ë³€ìˆ˜
TWILIO_SID=
TWILIO_TOKEN=
TWILIO_MSID=
TWILIO_MY_PHONE= ex) +821012345678  +êµ­ê°€ë²ˆí˜¸ê°€ ìˆì–´ì•¼í•œë‹¤.

ì°¸ì¡°
https://www.twilio.com/docs/sms/quickstart/node



#########################
### 9.5 Sending Email ###
#########################
-SendGrid
SendGridëŠ” ê±°ë˜ ë° ë§ˆì¼€íŒ… ì´ë©”ì¼ì„ ìœ„í•œ ê³ ê° ì»¤ë®¤ë‹ˆì¼€ì´ì…˜ í”Œë«í¼.
https://sendgrid.com/solutions/email-api/

SendGridë¥¼ ì‚¬ìš©í•˜ì—¬ ë©”ì¼ ë³´ë‚´ê¸°
1. ê°€ì… ë° ì¸ì¦ í›„ APIí‚¤ ìƒì„± ë° ìƒì„±í•œ APIí‚¤ í™˜ê²½ë³€ìˆ˜ì— ì €ì¥
2. npm install --save @sendgrid/mail
3. ì´ë©”ì¼ ë³´ë‚´ê¸° ë¼ì´ë¸ŒëŸ¬ë¦¬ ì‚¬ìš©
ex) import mail from "@sendgrid/mail";
    
    mail.setApiKey(process.env.SENDGRID_API_KEY!);
    
    const msg = await mail.send({
        from: "from email address",
        to: "to email address",
        subject: "subject",
        text: "text",
        html: "<strong>sendgrid</strong>",
    });
ì°¸ì¡°
https://app.sendgrid.com/guide/integrate/langs/nodejs



####################
### 9.6 Token UI ###
####################
-BigInt ( JavaScript íƒ€ì… )
BigIntëŠ” Number ì›ì‹œ ê°’ì´ ì•ˆì •ì ìœ¼ë¡œ ë‚˜íƒ€ë‚¼ ìˆ˜ ìˆëŠ” ìµœëŒ€ì¹˜ì¸ 2^53 -1 ë³´ë‹¤ í° ì •ìˆ˜ë¥¼ í‘œí˜„í•  ìˆ˜ ìˆëŠ” ë‚´ì¥ ê°ì²´ì´ë‹¤.
ì°¸ì¡°
https://developer.mozilla.org/ko/docs/Web/JavaScript/Reference/Global_Objects/BigInt

-onDelete: Cascade
schema.prisma
ë¶€ëª¨ ë ˆì½”ë“œê°€ ì‚­ì œë˜ë©´ ìì‹ ë ˆì½”ë“œë¥¼ í•¨ê»˜ ì‚­ì œí•˜ë„ë¡í•˜ëŠ” ì˜µì…˜ì´ë‹¤.

// option
Casecade
Restrict
NoAction
SetNull
SetDefault
ì°¸ì¡°
https://www.prisma.io/docs/concepts/components/prisma-schema/relations/referential-actions



###############################
### 9.7 Serverless Sessions ###
###############################
-Iron Session
ë°ì´í„°ë¥¼ ì €ì¥í•˜ê¸° ìœ„í•´ ì„œëª…ë˜ê³  ì•”í˜¸í™”ëœ ì¿ í‚¤ë¥¼ ì‚¬ìš©í•˜ëŠ” Node.js stateless session ìœ í‹¸ë¦¬í‹°
Next.js Express, NestJs, Fastify ë° ëª¨ë“  Node.js HTTP í”„ë ˆì„ì›Œí¬ì™€ í•¨ê»˜ ì‘ë™í•œë‹¤.
ì„¤ì¹˜
npm install iron-session
ex)
import { withIronSessionApiRoute } from "iron-session/next";

export default withIronSessionApiRoute(NextApiHandler)
ì°¸ì¡°
https://github.com/vvo/iron-session

-req.session.save()
ì„¸ì…˜ ë°ì´í„°ë¥¼ ì•”í˜¸í™”í•˜ê³  ì¿ ë¦¬ë¥¼ ì„¤ì •í•œë‹¤.



###########################
### 9.8 Profile Handler ###
###########################
-TypeScriptë¡œ ì„¸ì…˜ ë°ì´í„° Tying( req.sessionì— ë°ì´í„° ì—°ê²° )
req.sessionì€ ìë™ìœ¼ë¡œ ì˜¬ë°”ë¥¸ ìœ í˜•ìœ¼ë¡œ ì±„ì›Œì§€ë¯€ë¡œ .save() ë° .destroy()ë¥¼ í˜¸ì¶œí•  ìˆ˜ ìˆë‹¤.
ê·¸ëŸ¬ë‚˜ ë” ë‚˜ì•„ê°€ ì„¸ì…˜ ë°ì´í„°ë„ ì…ë ¥í•  ìˆ˜ ìˆë‹¤.
ex)
declare module "iron-session"{
    interface IronSessionData {
        user?:{
            id: nuber;,
        };
    }
}
ì°¸ì¡°
https://github.com/vvo/iron-session#typing-session-data-with-typescript

Module Augmentation
ìœ„ì˜ ì˜ˆì‹œì™€ ê°™ì´ ëª¨ë“ˆì„ ê°€ì ¸ì™€ì„œ module augmentationì„ ì‚¬ìš©í•´ì„œ ì»´íŒŒì¼ëŸ¬ì—ê²Œ ì•Œë ¤ì¤„ ìˆ˜ ìˆë‹¤.
JavaScript ëª¨ë“ˆì€ ë³‘í•©ì„ ì§€ì›í•˜ì§€ ì•Šì§€ë§Œ ê¸°ì¡´ ê°œì²´ë¥¼ ê°€ì ¸ì˜¨ ë‹¤ìŒ ì—…ë°ì´íŠ¸í•˜ë©° íŒ¨ì¹˜í•  ìˆ˜ ìˆë‹¤.

ex)
import { Observable } from "./observable";
    declare module "./observable" {
        interface Observable< T> {
        map< U>(f: (x: T) => U): Observable< U>;
    }
}
ì°¸ì¡°
https://www.typescriptlang.org/docs/handbook/declaration-merging.html#module-augmentation



#####################
### 9.10 NextAuth ###
#####################
-NextAuth.js
Next.jsì—ì„œ Authenticationêµ¬í˜„ì„ ë„ì™€ì£¼ëŠ” íŒ¨í‚¤ì§€ì´ë‹¤.
NextAuth.jsëŠ” Next.js ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ìœ„í•œ ì™„ì „í•œ ì˜¤í”ˆ ì†ŒìŠ¤ ì¸ì¦ ì†”ë£¨ì…˜ì´ë‹¤.
Next.js ë° Serverlessë¥¼ ì§€ì›í•˜ë„ë¡ ì²˜ìŒë¶€í„° ì„¤ê³„ë˜ì—ˆë‹¤.
ì°¸ì¡°
https://next-auth.js.org/getting-started/example
https://www.npmjs.com/package/next-auth



#########################
### 10.0 Introduction ###
#########################
-SWR
ë°ì´í„° fetching ìœ„í•œ React Hooks
SWRì€ ë¨¼ì € ìºì‹œ(ìŠ¤íƒœì¼)ë¡œ ë¶€í„° ë°ì´í„°ë¥¼ ë°˜í™˜í•œ í›„, fetch ìš”ì²­(ì¬ê²€ì¦)ì„ í•˜ê³ , ìµœì¢…ì ìœ¼ë¡œ ìµœì‹ í™”ëœ ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¤ëŠ” ë°©ì‹ì´ë‹¤.
SWRì„ ì‚¬ìš©í•˜ë©´ ì»´í¬ë„ŒíŠ¸ëŠ” ì§€ì†ì ì´ë©° ìë™ìœ¼ë¡œ ë°ì´í„° ì—…ë°ì´íŠ¸ ìŠ¤íŠ¸ë¦¼ì„ ë°›ê²Œ ë©ë‹ˆë‹¤.
ê·¸ë¦¬ê³  UIëŠ” í•­ìƒ ë¹ ë¥´ê³  ë°˜ì‘ì ì´ë‹¤.
ì°¸ì¡°
https://swr.vercel.app/ko



#########################
### 10.2 useUser Hook ###
#########################
-router.push()
ì´ì „ í˜ì´ì§€ì— ëŒ€í•œ íˆìŠ¤í† ë¦¬ë¥¼ ë‚¨ê¸°ê³  ì‹¶ë‹¤ë©´ router.push()ë¥¼ ì‚¬ìš©í•œë‹¤.

-router.replace()
ì´ì „ í˜ì´ì§€ì— ëŒ€í•œ íˆìŠ¤í† ë¦¬ë¥¼ ë‚¨ê¸°ê³  ì‹¶ì§€ ì•Šë‹¤ë©´ roter.replace()ë¥¼ ì‚¬ìš©í•œë‹¤.

ex) router.push(url, as, options)
    router.replace(url, as, option)
ì°¸ì¡°
https://nextjs.org/docs/api-reference/next/router#routerpush



################
### 10.3 SWR ###
################
-SWR
SWRì€ ë¨¼ì € ìºì‹œë¡œë¶€í„° ë°ì´í„°ë¥¼ ë°˜í™˜í•œ í›„, fetchìš”ì²­(ì¬ê²€ì¦)ì„ í•˜ê³ , ìµœì¢…ì ìœ¼ë¡œ ìµœì‹ í™”ëœ ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¤ëŠ” ë°©ì‹ì´ë‹¤.
SWRì„ ì‚¬ìš©í•˜ë©´ ì»´í¬ë„ŒíŠ¸ëŠ” ì§€ì†ì´ë©° ìë™ìœ¼ë¡œ ë°ì´í„° ì—…ë°ì´íŠ¸ ìŠ¤íŠ¸ë¦¼ì„ ë°›ê²Œ ëœë‹¤.
ê·¸ë¦¬ê³  UIëŠ” í•­ìƒ ë¹ ë¥´ê³  ë°˜ì‘ì 

ì„¤ì¹˜
npm i swr --legacy-peer-deps ( ë’¤ ëª…ë ¹ì–´ëŠ” react18 ì •ì‹ ì´ì „ì´ê¸° ë•Œë¬¸ì— )
ì°¸ì¡°
https://swr.vercel.app/ko/docs/getting-started

-useSWR ì‚¬ìš©í•˜ê¸°
1.JSONë°ì´í„°ë¥¼ ì‚¬ìš©í•˜ëŠ” ì¼ë°˜ì ì¸ RESTful APIë¼ë©´ ë¨¼ì € ë„¤ì´í‹°ë¸Œ fetchì˜ ë‹¨ìˆœ í•œ ë˜í¼ì¸ fetcherí•¨ìˆ˜ë¥¼ ìƒì„±í•´ì•¼í•œë‹¤.
ex) const fetcher = (...args) => fetch(...args).then((response) => response.json());

2.ê·¸ ë‹¤ìŒ useSWRì„ importí•˜ê³  í•¨ìˆ˜ ì»´í¬ë„ŒíŠ¸ ë‚´ì—ì„œ ì‚¬ìš©í•œë‹¤.
ex) const { data, error } = useSWR("/api/users/me", fetcher);
ì¼ë°˜ì ìœ¼ë¡œ ì„¸ê°€ì§€ ìš”ì²­ ìƒíƒœê°€ ê°€ëŠ¥í•˜ë‹¤.
loading, ready, error, data ì™€ errorê°’ì„ ì‚¬ìš©í•´ í˜„ì¬ ìš”ì²­ì˜ ìƒíƒœë¥¼ ì•Œì•„ë‚´ê³ , í•´ë‹¹í•˜ëŠ” UIë¥¼ ë°˜í™˜í•  ìˆ˜ ìˆë‹¤.



#############################
### 10.4 useUser Refactor ###
#############################
-Global Configuration
ì»¨í…ìŠ¤íŠ¸ SWRConfigëŠ” ëª¨ë“  SWR í›…ì— ëŒ€í•œ Global Configuration(ì˜µì…˜)ì„ ì œê³µí•œë‹¤.
ex) _app.tsx
<SWRConfig
    value={{
        refreshInterval: 3000,
        fetcher: (resource, init) => fetch(resource, init).then(res => res.json())
    }}
>
</SWRConfig>
ì°¸ì¡°
https://swr.vercel.app/docs/global-configuration

-useSWR ì˜µì…˜
const { data, error, isValidating, mutate } = useSWR(key, fetcher, options)
ì°¸ì¡°
https://swr.vercel.app/docs/options



##########################
### 11.0 Product Model ###
##########################
- ê¸°ë³¸ ìœ í˜• ë§¤í•‘
í•„ë“œì— ì‚¬ìš©í•´ì•¼ í•˜ëŠ” ê¸°ë³¸ ë°ì´í„°ë² ì´ìŠ¤ ìœ í˜•ì„ ì •ì˜
ì°¸ì¡°
https://www.prisma.io/docs/concepts/components/prisma-schema/data-model#native-types-mapping

MySQL ê¸°ë³¸ ë°ì´í„° ë² ì´ìŠ¤ ìœ í˜•
ex) @db.Text, @db.MediumText, @db.LongText
ì°¸ì¡°
https://www.prisma.io/docs/reference/api-reference/prisma-schema-reference#mysql

-Next.jsë¡œ PrismaClientë¥¼ ì¸ìŠ¤í„´ìŠ¤í™”í•˜ê¸° ìœ„í•œ ëª¨ë²” ì‚¬ë¡€
( â†“â†“â†“ ì•„ë˜ ê²½ê³ ë¥¼ í•´ê²°í•˜ëŠ” íš¨ê³¼ì ì¸ ë°©ë²• â†“â†“â†“ )
â— warn(prisma-client) There are already 10 instances of Prisma Client actively running.
ì°¸ì¡°
https://www.prisma.io/docs/support/help-articles/nextjs-prisma-client-dev-practices



#############################
### 11.5 Related Products ###
#############################
-OR
í•˜ë‚˜ ì´ìƒì˜ ì¡°ê±´ì´ trueë¥¼ ë°˜í™˜í•´ì•¼í•œë‹¤.
ex) title í•„ë“œì— Prisma ë˜ëŠ” DBê°€ í¬í•¨ëœ Post ë ˆì½”ë“œ ê°€ì ¸ì˜¤ê¸°
const result = await prisma.post.findMany({
  where: {
    OR: [
      {
        title: {
          contains: 'Prisma',
        },
      },
      {
        title: {
          contains: 'databases',
        },
      },
    ],
  },
});
ì°¸ì¡°
https://www.prisma.io/docs/reference/api-reference/prisma-client-reference#or

-AND
ëª¨ë“  ì¡°ê±´ì´ trueë¥¼ ë°˜í™˜í•´ì•¼í•œë‹¤.
ex)
const result = await prisma.post.findMany({
  where: {
    AND: [
      {
        content: {
          contains: 'Prisma',
        },
      },
      {
        published: {
          equals: false,
        },
      },
    ],
  },
});
ì°¸ì¡°
https://www.prisma.io/docs/reference/api-reference/prisma-client-reference#and

-ORDER BY ë° TAKE
ex)
await prisma.product.findMany({ 
    where: { 
        OR: orArray, 
        AND: { 
            NOT: { 
                id: foundProduct?.id 
            },
        },
    }, 
    orderBy: { 
        createdAt: "desc" 
    }, 
    take: 10 
});



##############################
### 11.6 Favorite Products ###
##############################
-Delete
deleteëŠ” ê¸°ì¡´ DB ë ˆì½”ë“œë¥¼ ì‚­ì œí•œë‹¤.( id ë˜ëŠ” ìœ ë‹ˆí¬í•œ ì†ì„±ìœ¼ë¡œë§Œ ì‚­ì œ ê°€ëŠ¥ )
ex) const user = await client.user.delete({
        where: {
            id: 1,
        },
    });
ì°¸ì¡°
https://www.prisma.io/docs/reference/api-reference/prisma-client-reference#delete

-DeleteMany
deleteManyëŠ” íŠ¸ëœì­ì…˜ì—ì„œ ì—¬ëŸ¬ ë ˆì½”ë“œë¥¼ ì‚­ì œí•œë‹¤.
ex) const deleteUser = await client.user.deleteMany({
        where: {
            name: 'iPhone',
        },
    });
ì°¸ì¡°
https://www.prisma.io/docs/reference/api-reference/prisma-client-reference#deletemany



############################
### 11.8 Bound Mutations ###
############################
-Mutate
mutate(data?, shouldRevalidate?)
ìºì‹œ ëœ ë°ì´í„°ë¥¼ ë®¤ë°ì´íŠ¸í•˜ê¸° ìœ„í•œ í•¨ìˆ˜

ex) const { data, mutate } = useSWR<ItemDetailResponse>(router.query.id ? `/api/products/${router.query.id}` : null);
    if (!data) return;
    mutate({ ...data, isLiked: !data?.isLiked }, false);

mutate(data, option)
useSWRë¡œ ê°€ì ¸ì˜¨ dataë¥¼ ë®¤í…Œì´íŠ¸, optionì€ trueì¼ ê²½ìš° ë‹¤ì‹œ ë®¤í…Œì´íŠ¸ falseì¼ ê²½ìš° x
ì°¸ì¡°
https://swr.vercel.app/ko/docs/mutation

-Bound Mutate
useSWRì— ì˜í•´ ë°˜í™˜ëœ SWR ê°ì²´ëŠ” SWRì˜ í‚¤ë¡œ ë¯¸ë¦¬ ë°”ì¸ë”© ëœ mutate() í•¨ìˆ˜ë„ í¬í•¨ëœë‹¤.
ê¸°ëŠ¥ì ìœ¼ë¡œëŠ” ì „ì—­ mutate í•¨ìˆ˜ì™€ ë™ì¼í•˜ì§€ë§Œ keyíŒŒë¼ë¯¸í„°ë¥¼ ìš”êµ¬í•˜ì§€ ì•ŠëŠ”ë‹¤.
ex) const { data, mutate } = useSWR('/api/user', fetcher)
ì°¸ì¡°
https://swr.vercel.app/docs/mutation#bound-mutate



##############################
### 11.9 Unbound Mutations ###
##############################
-Mutation
useSWRConfig() hookìœ¼ë¡œë¶€í„° mutate í•¨ìˆ˜ë¥¼ ì–»ì„ ìˆ˜ ìˆìœ¼ë©°, mutate(key)ë¥¼ í˜¸ì¶œí•˜ì—¬ ë™ì¼í•œ í‚¤ë¥¼ ì‚¬ìš©í•˜ëŠ”
ë‹¤ë¥¸ SWR hookì—ê²Œ revalidation ë©”ì‹œì§€ë¥¼ ì „ì—­ìœ¼ë¡œ ë¸Œë¡œë“œìºìŠ¤íŒ…í•  ìˆ˜ ìˆë‹¤.
mutateë¥¼ ì‚¬ìš©í•˜ë©´ ë¡œì»¬ ë°ì´í„°ë¥¼ ì—…ë°ì´íŠ¸í•˜ëŠ” ë™ì‹œì— ìœ íš¨ì„±ì„ ë‹¤ì‹œ ê²€ì‚¬í•˜ê³  ìµœì¢…ì ìœ¼ë¡œ ë°ì´í„°ë¥¼ ë°”ê¿€ ìˆ˜ ìˆë‹¤.

ex) const { mutate } = useSWRConfig();

â†“â†“â†“ ì´ í‚¤ê°€ ìˆëŠ” ëª¨ë“  SWRì— revalidationí•˜ë„ë¡ ì§€ì‹œ ë° ë¡œì»¬ ë°ì´í„°ê°€ ì˜¬ë°”ë¥¸ì§€ í™•ì¸í•˜ê¸° ìœ„í•´ ê°±ì‹ ( refetch )íŠ¸ë¦¬ê°€
mutate(key);
mutate("/api/user");

â†“â†“â†“ ë¡œì»¬ ë°ì´í„°ë¥¼ ì¦‰ì‹œ ì—…ë°ì´íŠ¸í•˜ì§€ë§Œ, revalitationì€ ë¹„í™œì„±í™”
mutate("/api/user", {...data, name: newName }, false );

â­ Bound Mutations = í˜„ì¬ í™”ë©´ì—ì„œ ìºì‹œ ëœ ë°ì´í„°ë¥¼ mutate 
â­ Unbound Mutations = mutate(key)ë¥¼ í†µí•´ ë™ì¼í•œ í‚¤ë¥¼ ì‚¬ìš©í•˜ëŠ” ë‹¤ë¥¸ í˜ì´ì§€ì˜ SWR hookì„ mutate

ì°¸ì¡°
https://swr.vercel.app/docs/mutation



####################################
### 11.10 Counting Relationships ###
####################################
-Count relations
relationì˜ ìˆ˜ (ex: ì‚¬ìš©ìì˜ ê²Œì‹œê¸€ ìˆ˜, ì¢‹ì•„ìš” ìˆ˜)ë¥¼ ë°˜í™˜í•˜ë ¤ë©´ ë‹¤ìŒê³¼ ê°™ì´ ì¤‘ì²© selectì™€ í•¨ê»˜
_count ë§¤ê°œë³€ìˆ˜ë¥¼ ì‚¬ìš©í•œë‹¤.
ë ˆì½”ë“œë¥¼ ë°˜í™˜í•˜ëŠ” ëª¨ë“  ì¿¼ë¦¬ì™€ í•¨ê»˜ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤. ( delete, update ë° findFirst í¬í•¨ )

ex) const products = await client.product.findMany({
        select: {
            _count: {
                select: {
                    favs: true,
                },
            },
        },
    });
ì°¸ì¡°
https://www.prisma.io/docs/concepts/components/prisma-client/aggregation-grouping-summarizing#count-relations



######################
### 12.6 useCoords ###
######################
-Geolocation API
ì‚¬ìš©ìì˜ í˜„ì¬ ìœ„ì¹˜ë¥¼ ì§€ë„ì— í‘œì‹œí•˜ê±°ë‚˜ ìœ„ì¹˜ ê¸°ë°˜ ê°œì¸í™” ì •ë³´ë¥¼ ì œê³µí•˜ëŠ” ë“± ì›¹, ì•±ì—ì„œ ìœ„ì¹˜ ì •ë³´ë¥¼ ê°€ì ¸ì™€ì•¼í•˜ëŠ” ê²½ìš° ì‚¬ìš©í•œë‹¤.
Geolocation APIëŠ” navigator.geolocationì„ í†µí•´ ì ‘ê·¼í•œë‹¤.
ì´ ë•Œ ì‚¬ìš©ìì˜ ë¸Œë¼ìš°ì €ëŠ” ìœ„ì¹˜ ì •ë³´ ì ‘ê·¼ ê¶Œí•œì„ ìš”ì²­í•˜ê²Œ ë˜ê³ , ì‚¬ìš©ìê°€ í—ˆê°€í•  ê²½ìš° í˜„ì¬ ì¥ì¹˜ì—ì„œ ì‚¬ìš© ê°€ëŠ¥í•œ ìµœì„ ì˜ ë°©ë²•( GPS, WiFi... )ì„ í†µí•´ ìœ„ì¹˜ë¥¼ ì•Œì•„ë‚¸ë‹¤.

Geolocation.getCurrentPosition()
ì¥ì¹˜ì˜ í˜„ì¬ ìœ„ì¹˜ë¥¼ ì¡°ì‚¬í•œ í›„ GeolocationPosition ê°ì²´ë¡œ ë°˜í™˜í•œë‹¤.
ex) navigator.geolocation.getCurrentPosition( success, error, [options]);

success
GeolocationPosition ê°ì²´ë¥¼ ìœ ì¼í•œ ë§¤ê°œë³€ìˆ˜ë¡œ ë°›ì€ ì½œë°± í•¨ìˆ˜.
error: Optional
GeolocationPositionError ê°ì²´ë¥¼ ìœ ì¼í•œ ë§¤ê°œë³€ìˆ˜ë¡œ ë°›ì€ ì½œë°± í•¨ìˆ˜
ì°¸ì¡°
https://developer.mozilla.org/ko/docs/Web/API/Geolocation/getCurrentPosition



########################
### 12.7 Geo Search  ###
########################
-gte or lte
get: í¬ê±°ë‚˜ ê°™ë‹¤.
lte: ì‘ê±°ë‚˜ ê°™ë‹¤.
ex) const getPost = await client.post.findMany({
        where: {
            likes: {
                lte: 9,
            },
        },
    });
ì°¸ì¡°
https://www.prisma.io/docs/reference/api-reference/prisma-client-reference#lte



###################
### 13.0 Models ###
###################
-@relation ì¸ì
name: ê´€ê³„ë¥¼ ëª…í™•í•˜ê²Œ í•˜ê¸° ìœ„í•´ ê´€ê³„ì˜ ì´ë¦„ì„ ì •ì˜í•œë‹¤.
@relation(name: "writtenReviews", reference: [id]) ë˜ëŠ” @relation("writtenReviews")
fields: í˜„ì¬ ëª¨ë¸ì˜ í•„ë“œ ëª©ë¡
reference: ê´€ê³„ì˜ ë°˜ëŒ€í¸ì— ìˆëŠ” ëª¨ë¸ì˜ í•„ë“œ ëª©ë¡

ex) Reviewì—ì„œ Userë¥¼ relationí•˜ëŠ” ê²½ìš°ì— 2ê°€ì§€ ì¼ê²½ìš° name ê°’ì„ ì¤˜ì„œ ê´€ê³„ë¥¼ ëª…í™•í•˜ê²Œí•œë‹¤.
model User {
    id              Int         @id @default(autoincrement())
    .
    .
    .
    writtenReviews  Review[]    @relation(name: "writtenReviews")
    receivedReviews Review[]    @relation(name: "receivedReviews")
}

model Review {
  id           Int      @id @default(autoincrement())
  review       String   @db.MediumText
  createdBy    User     @relation(name: "writtenReviews", fields: [createdById], references: [id], onDelete: Cascade)
  createdById  Int
  createdFor   User     @relation(name: "receivedReviews", fields: [createdForId], references: [id], onDelete: Cascade)
  createdForId Int
}
ì°¸ì¡°
https://www.prisma.io/docs/reference/api-reference/prisma-schema-reference#relation

-Disambiguating relations( ëª…í™•í•œ ê´€ê³„ )
ë‘ ê°œì˜ ë™ì¼í•œ ëª¨ë¸ ê°„ì— ë‘ ê°œì˜ ê´€ê³„ë¥¼ ì •ì˜í•  ë•Œ @relationì†ì„±ì— nameì¸ìˆ˜ë¥¼ ì¶”ê°€í•˜ì—¬ ëª¨í˜¸ì„±ì„ ì œê±°í•´ì•¼í•œë‹¤.
ì°¸ì¡°
https://www.prisma.io/docs/concepts/components/prisma-schema/relations#the-relation-attribute

-enum
enumì€ MySQL, PostgreSQLì—ì„œ ì§€ì›
ë‘ ê°€ì§€ì˜ ê°€ëŠ¥í•œ ê°’ìœ¼ë¡œ enumì„ ì§€ì •í•˜ê³  ê¸°ë³¸ê°’ìœ¼ë¡œ ì„¤ì •í•œë‹¤.

ex) í•„ë“œê°’ì´ ë™ì¼í•œ ëª¨ë¸ì„ enum ì²˜ë¦¬í•  ê²½ìš°
model Sale {
    id        Int      @id @default(autoincrement())
    user      User     @relation(fields: [userId], references: [id], onDelete: Cascade)
    userId    Int
    product   Product  @relation(fields: [productID], references: [id], onDelete: Cascade)
    productID Int
    createdAt DateTime @default(now())
    updatedAt DateTime @updatedAt
}

model Purchase {
    id        Int      @id @default(autoincrement())
    user      User     @relation(fields: [userId], references: [id], onDelete: Cascade)
    userId    Int
    product   Product  @relation(fields: [productID], references: [id], onDelete: Cascade)
    productID Int
    createdAt DateTime @default(now())
    updatedAt DateTime @updatedAt
}

                        â†“â†“â†“â†“â†“â†“â†“â†“â†“â†“â†“â†“â†“â†“â†“â†“â†“â†“                         
model User {
    id              Int         @id @default(autoincrement())
    .
    .
    .
    records         Record[]
}

model Record {
    id        Int      @id @default(autoincrement())
    user      User     @relation(fields: [userId], references: [id], onDelete: Cascade)
    userId    Int
    product   Product  @relation(fields: [productID], references: [id], onDelete: Cascade)
    productID Int
    kind      Kind      â­â­â­
    createdAt DateTime @default(now())
    updatedAt DateTime @updatedAt
}

enum Kind {
    Sale
    Purchase
}

ì°¸ì¡°
https://www.prisma.io/docs/reference/api-reference/prisma-schema-reference#enum



####################
### 13.1 Reviews ###
####################
-@default
í•„ë“œì˜ ê¸°ë³¸ê°’ì„ ì •ì˜í•œë‹¤.
ex) model Post{
        id          Int         @id @default(autoincrement())
        createdAt   DateTime    @default(now())
        title       String
        published   Boolean     @default(false)
    }

â— ê¸°ì¡´ modelì— ì»¬ëŸ¼ì„ ì¶”ê°€ì‹œ(modelë‚´ì— ë°ì´í„°ê°€ ìˆì„ê²½ìš°) ê¸°ë³¸ê°’ì´ í•„ìš”í•œ ë¬¸ì œê°€ ìƒê¸¸ê²½ìš°
1. DB ë¦¬ì…‹ -> ì‚¬ìš©âŒâŒâŒ

2. ê¸°ë³¸ê°’ ì¶”ê°€
ex) @default
model Review {
    id           Int      @id @default(autoincrement())
    score        Int      @default(1) â­
}

3. ì»¬ëŸ¼ê°’ì„ requireë¡œ ì„¤ì •í•˜ì§€ ì•Šê¸°
ex) require(?)
model Review {
    id           Int      @id @default(autoincrement())
    score        Int?     â­
}



########################
### 14.1 Detail Page ###
########################
-valueAsNumber: boolean
React-hook-formì—ì„œ ì…ë ¥í•œ inputì„ ìˆ«ìë¡œ ë°˜í™˜í•œë‹¤.
ë¬¸ì œê°€ ë°œìƒí•˜ë©´ NaNìœ¼ë¡œ ë°˜í™˜
valueAs í”„ë¡œì„¸ìŠ¤ëŠ” ìœ íš¨ì„± ê²€ì‚¬ í›„ ë°œìƒí•œë‹¤.
ex) register({valueAsNumber : true})

-valueAsDate: boolean
ì…ë ¥í•œ inputì„ ë‚ ì§œë¡œ ë°˜í™˜í•œë‹¤.
ë¬¸ì œê°€ ë°œìƒí•˜ë©´ nullì´ ë°˜í™˜
ex) register({valueAsDate : true})
ì°¸ì¡°
https://react-hook-form.com/kr/api/



##################################
### 14.4 Mutations and Refresh ###
##################################
-useSWR() ì˜µì…˜
refreshInterval
ê¸°ë³¸ê°’: refreshInterval = 0
ìˆ«ìë¥¼ ì„¤ì •í•˜ë©´ ë°€ë¦¬ì´ˆ ê°„ê²©ìœ¼ë¡œ poling í•œë‹¤.
í•¨ìˆ˜ë¡œ ì„¤ì •í•˜ë©´ í•¨ìˆ˜ëŠ” ìµœì‹  ë°ì´í„°ë¥¼ ë°›ê³ , ë°€ë¦¬ì´ˆ ë‹¨ìœ„ë¡œ ë¦¬í„´í•œë‹¤.
ex) useSWR(`/api/example`, fetcher, { refreshInterval: 1000 })
ì°¸ì¡°
https://swr.vercel.app/docs/options#options
https://swr.vercel.app/ko/docs/options

Revalidate on Interval
https://swr.vercel.app/docs/revalidation#revalidate-on-interval



####################
### 14.5 Seeding ###
####################
-Seeding ur DB
ì‹œë”©ì„ ì‚¬ìš©í•˜ë©´ DBì— ë™ì¼í•œ ë°ì´í„°ë¥¼ ì¼ê´€ë˜ê²Œ ë‹¤ì‹œ ìƒì„±í•  ìˆ˜ ìˆìœ¼ë©° ë‹¤ìŒì„ ìˆ˜í–‰í•  ìˆ˜ ìˆë‹¤.
1. ì–´í”Œë¦¬ì¼€ì´ì…˜ì„ ì‹œì‘í•˜ëŠ”ë° í•„ìš”í•œ ë°ì´í„°(ex: ê¸°ë³¸ ì–¸ì–´orê¸°ë³¸ í†µí™”)ë¡œ DBë¥¼ ì±„ìš´ë‹¤.
2. ê°œë°œ í™˜ê²½ì—ì„œ ì–´í”Œë¦¬ì¼€ì´ì…˜ì„ ê²€ì¦í•˜ê³  ì‚¬ìš©í•˜ê¸° ìœ„í•œ ê¸°ë³¸ ë°ì´í„° ì œê³µ.

npm i ts-node
DBì— ì‹œë“œí•˜ë ¤ë©´ db seed CLIëª…ë ¹ì„ ì‹¤í–‰.
npx prisma db seed
ex) package.json
    "prisma": {
    "seed": "ts-node --compiler-options {\"module\":\"CommonJS\"} prisma/seed.ts"
}
ì°¸ì¡°
https://www.prisma.io/docs/guides/database/seed-database



#########################
### 15.0 Introduction ###
#########################
-Cloudflare
í´ë¼ìš°ë“œë¥¼ ìœ„í•´ ë§Œë“¤ì–´ì§„ ì „ì—­ ë„¤íŠ¸ì›Œí¬
CloudflareëŠ” ì¸í„°ë„·ì— ì—°ê²°í•˜ëŠ” ëª¨ë“  ê²ƒì„ ì•ˆì „í•˜ê³  ë¹„ë°€ì„ ìœ ì§€í•˜ë©´ì„œ ì‹ ì†í•˜ê³  ì•ˆì •ì ìœ¼ë¡œ ì—°ê²°í•˜ë„ë¡ ì„¤ê³„ëœ ì „ì—­ ë„¤íŠ¸ì›Œí¬ì´ë‹¤.
Cloudflare Images
ëŒ€ê·œëª¨ë¡œ ì´ë¯¸ì§€ë¥¼ ì €ì¥, í¬ê¸°ì¡°ì •, ìµœì í™”í•˜ëŠ” í•˜ë‚˜ì˜ API
Cloudflare ImagesëŠ” ì´ë¯¸ì§€ ì¸í”„ë¼ë¥¼ êµ¬ì¶•í•˜ê³  ìœ ì§€í•˜ëŠ” íš¨ìœ¨ì ì¸ ì†”ë£¨ì…˜ì„ ì œê³µ.
í•˜ë‚˜ì˜ í†µí•© ì œí’ˆì„ ì´ìš©í•´ ì´ë¯¸ì§€ë¥¼ ëŒ€ê·œëª¨ë¡œ ì €ì¥, í¬ê¸° ì¡°ì •, ìµœì í™”í•œë‹¤.

1. ì´ë¯¸ì§€ ì €ì¥
ì•„ë¬´ë¦¬ ë§ì€ ì´ë¯¸ì§€ë¼ë„ Cloudflare Imagesì— ì €ì¥í•  ìˆ˜ ìˆë‹¤.
2. ì´ë¯¸ì§€ í¬ê¸° ì¡°ì • ë° ìµœì í™”
ë³´ê´€ ë° í¬ê¸° ì¡°ì •ì˜ ì¶”ê°€ ë¹„ìš© ì—†ì´ ëª¨ë“  ì´ë¯¸ì§€ë¥¼ ì¡°ì •í•  ìˆ˜ ìˆë‹¤.
3. ì „ë‹¬
ì „ì„¸ê³„ Cloudflare ë°ì´í„° ì„¼í„°ì—ì„œ ì´ë¯¸ì§€ë¥¼ ì „ë‹¬í•œë‹¤.
ì°¸ì¡°
https://www.cloudflare.com/ko-kr/products/cloudflare-images/



##########################
### 15.1 Image Preview ###
##########################
-URL.createObjectURL()
URL.createObjectURL(object) ë©”ì†Œë“œëŠ” ì£¼ì–´ì§ ê°ì²´ë¥¼ ê°€ë¦¬í‚¤ëŠ” URLì„ DOMStringìœ¼ë¡œ ë°˜í™˜í•œë‹¤.
ê°™ì€ ê°ì²´ë¥¼ ì‚¬ìš©í•˜ë”ë¼ë„, createObjectURL()ì„ ë§¤ë²ˆ í˜¸ì¶œí•  ë•Œë§ˆë‹¤ ìƒˆë¡œìš´ ê°ì²´ URLì„ ìƒì„±í•œë‹¤.
ê°ê°ì˜ URLì„ ë”ëŠ” ì“°ì§€ ì•Šì„ ë• URL.revokeObjectURL()ì„ ì‚¬ìš©í•´ í•˜ë‚˜ì”© í•´ì œí•´ì¤˜ì•¼í•œë‹¤.
ex) const url = URL.createObjectURL(object)
object
ê°ì²´ URLì„ ìƒì„±í•  File, Blob, MediaSource ê°ì²´
ë¦¬í„´ê°’
ì§€ì •í•œ objectì˜ ì°¸ì¡° URLì„ ë‹´ì€ DOMString

ì°¸ì¡°
https://developer.mozilla.org/ko/docs/Web/API/URL/createObjectURL



###################################
### 15.2 Direct Creator Uploads ###
###################################
-Direct Creator Upload
ìœ ì €ì˜ ë¸Œë¼ìš°ì €ê°€ cloudflareì— ë‹¤ì´ë ‰íŠ¸ë¡œ íŒŒì¼ì„ ì—…ë¡œë“œí•  ìˆ˜ ìˆë‹¤.
Cloudflare ì´ë¯¸ì§€ì˜ Direct Creator Upload ê¸°ëŠ¥ì„ ì‚¬ìš©í•˜ë©´ ì‚¬ìš©ìê°€ ì¼íšŒì„± ì—…ë¡œë“œ URLë¡œ ì‚¬ì§„ì„ ì—…ë¡œë“œí•  ìˆ˜ ìˆë‹¤.
Direct Creator Uploadë¥¼ ì‚¬ìš©í•˜ë©´ API Key ë˜ëŠ” í† í°ì„ í´ë¼ì´ì–¸íŠ¸ì— ë…¸ì¶œí•˜ì§€ ì•Šê³  ì—…ë¡œë“œë“¤ ìˆ˜ë½í•  ìˆ˜ ìˆë‹¤.
ë˜í•œ ì¤‘ê°„ì— ìŠ¤í† ë¦¬ì§€ ë²„í‚· ë° ì´ì™€ ê´€ë ¨ëœ ìŠ¤í† ë¦¬ì§€/ì†¡ì‹  ë¹„ìš©ì´ í•„ìš”í•˜ì§€ ì•Šë‹¤.

ë°©ì‹1.  âŒ
             file                        file
client ----------------> server ----------------> cloudflare
ì´ëŸ´ ê²½ìš° ë°ì´í„° ì „ì†¡ì— ë¹„ìš© ì²˜ë¦¬ê°€ ëŠ˜ì–´ë‚œë‹¤.

ë°©ì‹2 DCU (Direct Creator Upload )  â­•
             file
client ----------------> cloudflare
cloudflareì˜ ì¼íšŒì„± URLì„ í†µí•´ ë‹¤ì´ë ‰íŠ¸ë¡œ cloudflareì— ì—…ë¡œë“œí•  ìˆ˜ ìˆë‹¤.
API key ë˜ëŠ” í† í°ì˜ ë…¸ì¶œë„ ì—†ë‹¤.

ex)
curl --request POST \
 --url https://api.cloudflare.com/client/v4/accounts/<ACCOUNT_ID>/images/v2/direct_upload \
 --header 'Authorization: Bearer :token' \
 --form 'requireSignedURLs=true' \
 --form 'metadata={"key":"value"}'

ì°¸ì¡°
https://developers.cloudflare.com/images/cloudflare-images/upload-images/direct-creator-upload/



#############################
### 15.3 Cloudflare Setup ###
#############################
-Cloudflare Setup
.env
CLOUDFLARE_API_TOKEN=
CLOUDFLARE_ACCOUNT_ID=



##############################
### 15.4 Direct Upload URL ###
##############################
-Direct Upload Endpont
fetch url : `https://api.cloudflare.com/client/v4/accounts/${process.env.CLOUDFLARE_ACCOUNT_ID}/images/v1/direct_upload`

Header
    method: "POST",
    headers: {
        "Content-Type": "application/json",
        Authorization: `Bearer ${process.env.CLOUDFLARE_API_TOKEN}`,
    },



##############################
### 15.5 Cloudflare Upload ###
##############################
-FormData
Ajaxë¡œ form ì „ì†¡ì„ ê°€ëŠ¥í•˜ê²Œ í•´ì£¼ëŠ” FormData ê°ì²´ë¥¼ ìƒì„±í•œë‹¤.
AjaxëŠ” submitì‹œ ê¸°ë³¸ í¼ ë™ì‘ì´ e.preventDefault()ì´ê¸° ë•Œë¬¸ì—, í˜ì´ì§€ ì „í™˜ì—†ì´ í¼ ë°ì´í„°ë¥¼ ì „ì†¡í•  ìˆ˜ ìˆë‹¤.
ex) const form = new FormData() ë¡œ FormData ê°ì²´ ìƒì„±

form.append()ë¥¼ í†µí•´ key, valueí˜•íƒœë¡œ ê°’ì„ ì¶”ê°€í•œë‹¤.( formì— ì¼ì¢…ì˜ inputë°ì´í„°ë¥¼ ì¶”ê°€í•œë‹¤ëŠ” ì˜ë¯¸ )
form ê°ì²´ ì•ˆì— ì´ë¯¸ í‚¤ê°€ ì¡´ì¬í•˜ë©´ ê·¸ í‚¤ì— ìƒˆë¡œìš´ ê°’ì„ ì¶”ê°€í•˜ê³ , í‚¤ê°€ ì—†ìœ¼ë©´ ì¶”ê°€í•œë‹¤.
ex) form.append(name, value);
file íƒœê·¸ì¼ ê²½ìš° form.append(name, value, fileName); fileName ì—†ì„ ê²½ìš° ê¸°ì¡´ íŒŒì¼ëª…

ë³´í†µ formíƒœê·¸ë‚˜ inputíƒœê·¸ì—†ì´ Formì„ ì´ìš©í•´ ë°ì´í„°ë¥¼ ì „ì†¡í•˜ë ¤ê³  í•  ë•Œ FormDataë¥¼ ì‚¬ìš©í•œë‹¤.
ì°¸ì¡°
https://developer.mozilla.org/ko/docs/Web/API/FormData



#########################
### 16.0 Introduction ###
#########################
-Image Component and Image Optimization ( ì´ë¯¸ì§€ ì»´í¬ë„ŒíŠ¸ ë° ìµœì í™” )
Next.js ì´ë¯¸ì§€ ì»´í¬ë„ŒíŠ¸ì¸ next/imageëŠ” ëª¨ë˜ ì›¹ìš©ìœ¼ë¡œ ë°œì „ëœ HTML img íƒœê·¸ì˜ í™•ì¥ì´ë‹¤.
ì°¸ì¡°
https://nextjs.org/docs/basic-features/image-optimization



#########################
### 16.1 Local Images ###
#########################
-Local Images ( next/image component )
ë¡œì»¬ ì´ë¯¸ì§€ë¥¼ ì‚¬ìš©í•˜ë ¤ë©´ .jpg .png ë˜ëŠ” .webp íŒŒì¼ì„ ê°€ì ¸ì˜¨ë‹¤.
ë™ì  await import() ë˜ëŠ” require()ëŠ” ì§€ì›ë˜ì§€ ì•ŠëŠ”ë‹¤.
importëŠ” ë¹Œë“œì‹œ ë¶„ì„í•  ìˆ˜ ìˆë„ë¡ static ì´ì–´ì•¼ í•œë‹¤.
Next.jsëŠ” ê°€ì ¸ì˜¨ íŒŒì¼ì„ ê¸°ë°˜ìœ¼ë¡œ ì´ë¯¸ì§€ì˜ ë„ˆë¹„ì™€ ë†’ì´ë¥¼ ìë™ì„ ê²°ì •

<Image
    src={picture}
    alt"this is picture"
    width={500}             ìë™ìœ¼ë¡œ ì œê³µ
    height={500}            ìë™ìœ¼ë¡œ ì œê³µ
    blurDataURL="data:..."  ìë™ìœ¼ë¡œ ì œê³µ
    placeholder="blur"      ë¡œë”© ì¤‘ blur-up(ì„ íƒ)
/>
ì°¸ì¡°
https://nextjs.org/docs/basic-features/image-optimization#local-images



##########################
### 16.2 Remote Images ###
##########################
-Remote Images
ì›ê²© ì´ë¯¸ì§€ë¥¼ ì‚¬ìš©í•˜ë ¤ë©´ srcì†ì„±ì´ URL ë¬¸ìì—´ì´ì–´ì•¼ í•˜ë©° relative ë˜ëŠ” absoluteì¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
Next.jsëŠ” ë¹Œë“œ í”„ë¡œì„¸ìŠ¤ ë™ì•ˆ ì›ê²© íŒŒì¼ì— ì•¡ì„¸ìŠ¤í•  ìˆ˜ ì—†ìœ¼ë¯€ë¡œ width, height ë° ì„ íƒì  blurDataURL propsì„ ìˆ˜ë™ìœ¼ë¡œ ì„¤ì •í•´ì•¼í•œë‹¤.
ì°¸ì¡°
https://nextjs.org/docs/basic-features/image-optimization#remote-images

-Domains ( next.config.js ì„¤ì • )
Next.js ì´ë¯¸ì§€ ìµœì í™” APIë¥¼ ì‚¬ìš©í•˜ë©´ì„œ ì›ê²© ì´ë¯¸ì§€ì— ì ‘ê·¼í•˜ê³  ì‹¶ì„ ê²½ìš° loaderë¥¼ ê¸°ë³¸ ì„¤ì •ìœ¼ë¡œ ë‘ê³ 
srcì— ëŒ€í•œ ì ˆëŒ€ URLì„ ì…ë ¥í•œë‹¤.
ì•…ì˜ì ì¸ ì‚¬ìš©ìë¡œë¶€í„° ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ë³´í˜¸í•˜ë ¤ë©´ ì´ëŸ¬í•œ ë°©ì‹ìœ¼ë¡œ ì ‘ê·¼í•˜ë ¤ëŠ” ì›ê²© ë„ë©”ì¸ ëª©ë¡ì„
ì•„ë˜ì™€ ê°™ì´ next.config.js íŒŒì¼ì— ì •ì˜í•´ì•¼í•œë‹¤.
ex) next.config.js
module.exports = {
    images: {
        domains: ['imagedelivery.net','example.com', 'example2.com'],
    },
}
ì°¸ì¡°
https://nextjs.org/docs/basic-features/image-optimization#domains



########################
### 16.3 Layout Fill ###
########################
-layout
ë·°í¬íŠ¸ì˜ í¬ê¸°ê°€ ë³€ê²½ë  ë•Œ ì´ë¯¸ì§€ì˜ ë ˆì´ì•„ì›ƒ ë™ì‘

-layout options
intrinsic (default): ì´ë¯¸ì§€ì˜ í¬ê¸°ê¹Œì§€ ì»¨í…Œì´ë„ˆ ë„ˆë¹„ì— ë§ê²Œ ì¶•ì†Œ
fixed: ë„ˆë¹„ì™€ ë†’ì´ë¥¼ ì •í™•í•˜ê²Œ ì‚¬ì´ì¦ˆ
responsive: ì»¨í…Œì´ë„ˆ ë„ˆë¹„ì— ë§ê²Œ í¬ê¸° ì¡°ì •
fill(widthì™€ heightë¥¼ ì£¼ì§€ ì•Šì•˜ì„ ë•Œ ì¤˜ì•¼í•˜ëŠ” ì†ì„±): ì»¨í…Œì´ë„ˆë¥¼ ì±„ìš°ê¸° ìœ„í•´ x,y ì¶• ëª¨ë‘ì— ì„±ì¥
ì°¸ì¡°
https://nextjs.org/docs/api-reference/next/image#layout

object-fit
CSS object-fit ì†ì„±ì€ imgë‚˜ video ìš”ì†Œì™€ ê°™ì€ ëŒ€ì²´ ìš”ì†Œì™€ ê°™ì€ ëŒ€ì²´ ìš”ì†Œì˜ ì½˜í…ì¸  í¬ê¸°ë¥¼
ì–´ë–¤ ë°©ì‹ìœ¼ë¡œ ì¡°ì ˆí•´ ìš”ì†Œì— ë§ì¶œ ê²ƒì¸ì§€ ì§€ì •í•œë‹¤.
object-position ì†ì„±ì„ ì‚¬ìš©í•´ ëŒ€ì²´ ìš”ì†Œ ì½˜í…ì¸ ê°€ ì½˜í…ì¸  ë°•ìŠ¤ ë‚´ì— ìœ„ì¹˜í•  ì§€ì ì„ ë°”ê¿€ ìˆ˜ ìˆë‹¤.
ì°¸ì¡°
https://developer.mozilla.org/ko/docs/Web/CSS/object-fit

+ object-fitì„ tailwindë¡œë„ ì¤„ ìˆ˜ ìˆì§€ë§Œ 
Imageì»´í¬ë„ŒíŠ¸ì—ì„œ ì œê³µí•˜ëŠ” objectFit="cover"ì„ í†µí•´ ì¤„ ìˆ˜ë„ ìˆë‹¤.

ex) <div class="relative pb-80">
        <Image
            alt="Mountains"
            src="/mountains.jpg"
            layout="fill"
            ogjectFit="cover"
            quality={100}
        />
    </div>



########################
### 19.0 Middlewares ###
########################
-_middleware
ë¯¸ë“¤ì›¨ì–´ê°€ /pages/_middleware.tsì— ìƒì„±ëœ ê²½ìš° /pages ë””ë ‰í† ë¦¬ ë‚´ì˜ ëª¨ë“  ê²½ë¡œì—ì„œ ì‹¤í–‰ëœë‹¤.
â–½pages
    _middleware.ts  --> this middleware will run all routes under /pages
    index.tsx
    ...

ì¤‘ì²© ê²½ë¡œê°€ ìˆëŠ” í•˜ìœ„ ë””ë ‰í† ë¦¬ê°€ ìˆëŠ” ê²½ìš° ë¯¸ë“¤ì›¨ì–´ëŠ” ìœ„ì—ì„œ ì•„ë˜ë¡œ ì‹¤í–‰ëœë‹¤.
â–½pages
    index.tsx
â–½profile
    _middleware.ts --> ì²«ë²ˆì§¸ë¡œ ì‹¤í–‰
    about.tsx
â–½chats
    _middleware.ts --> ë‘ë²ˆì§¸ë¡œ ì‹¤í–‰
    [id].tsx

ì°¸ì¡°
https://nextjs.org/docs/advanced-features/middleware#execution-order



#######################################
### 19.1 Responses and Redirections ###
#######################################
-Response
ë¯¸ë“¤ì›¨ì–´ëŠ” requestê°€ ì™„ë£Œë˜ì§€ ì „ì— ì½”ë“œë¥¼ ì‹¤í•¼í•  ìˆ˜ ìˆê¸° ë•Œë¬¸ì— Next.jsì—ì„œ ì™„ì „í•œ ìœ ì—°ì„±ì„ ì œê³µí•œë‹¤.
ì‚¬ìš©ìì˜ ìˆ˜ì‹  ìš”ì²­ì— ë”°ë¼ rewriting, redirecting, í—¤ë” ì¶”ê°€ ë˜ëŠ” HTML ìŠ¤íŠ¸ë¦¬ë°ì„ í†µí•´ responseë¥¼ ìˆ˜ì •í•  ìˆ˜ ìˆë‹¤.
ex) 
import type { NextRequest, NextFetchEvent } from "next/server";
import { NextResponse } from "next/server";

export function middleware(req: NextRequest, ev: NextFetchEvent) {
    return new Response('this is middleware !!!");
}

ì°¸ì¡°
Response (MDN)
Fetch APIì˜ response ì¸í„°í˜ì´ìŠ¤ëŠ” ìš”ì²­ì— ëŒ€í•œ ì‘ë‹µì„ ë‚˜íƒ€ëƒ…ë‹ˆë‹¤.
https://developer.mozilla.org/en-US/docs/Web/API/Response



############################
### 19.2 Dynamic Imports ###
############################
-Dynamic Import
Next.jsëŠ” JSìš© ES2020 Dynamic import()ë¥¼ ì§€ì›í•œë‹¤.
ì´ë¥¼ í†µí•´ JSëª¨ë“ˆì„ ë™ì ìœ¼ë¡œ ê°€ì ¸ì™€ì„œ ì‘ì—…í•  ìˆ˜ ìˆë‹¤.
ë˜í•œ SSRê³¼ í•¨ê»˜ ì‘ë™í•œë‹¤. dynamic()ì€ React.lazyì™€ ìœ ì‚¬í•˜ê²Œ ì‚¬ì „ ë¡œë“œê°€ ì‘ë™í•˜ë„ë¡ ëª¨ë“ˆì˜ ìµœìƒìœ„ì— í‘œì‹œë˜ì–´ì•¼ í•˜ë¯€ë¡œ
Reactëœë”ë§ ë‚´ë¶€ì—ì„œ ì‚¬ìš©í•  ìˆ˜ ì—†ë‹¤.

ë³´í†µì˜ ê²½ìš°ëŠ” ìƒë‹¨ì— importë¥¼ í†µí•´ ì»´í¬ë„ŒíŠ¸ë¥¼ ë¶ˆëŸ¬ì˜¨ë‹¤.
ì´ëŸ´ê²½ìš° ìœ ì €ëŠ” í•´ë‹¹ì»´í¬ë„ŒíŠ¸ë¥¼ ì‚¬ìš©í•˜ì§€ì•Šì•„ë„ ì»´í¬ë„ŒíŠ¸ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ”ë°
Dynamic Importë¥¼ ì‚¬ìš© í•  ê²½ìš° ì‚¬ìš©ìê°€ ì»´í¬ë„ŒíŠ¸ë¥¼ ì‚¬ìš©í• ë•Œ ë¶ˆëŸ¬ì˜¤ê²Œí•œë‹¤.
ex) import dynamic from 'next/dynamic'
    ex: basic
    const DynamicComponent = dynamic(() => import('../component/example'));
    ex: with no SSR
    í•­ìƒ server sideì— ëª¨ë“ˆì„ í¬í•¨í•˜ê³  ìˆëŠ”ê±´ ì•„ë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´ ë¸Œë¼ìš°ì €ì—ì„œë§Œ ì‘ë™í•˜ëŠ” ë¼ì´ë¸ŒëŸ¬ë¦¬ê°€ í¬í•¨ëœ ê²½ìš°ë¼ë©´ ssr : falseë¥¼ í†µí•´ CSRë¡œ ì‹¤í–‰ í•  ìˆ˜ ìˆë‹¤.
    const DynamicComponent = dynamic(() => import('../component/example'), { ssr : false });

    <div>
        <DynamicComponent />
    </div>
ì°¸ì¡°
https://nextjs.org/docs/advanced-features/dynamic-import



##############################
### 19.3 Lazy-load Imports ###
##############################
-With custom loading commponents
dynamic ì»´í¬ë„ŒíŠ¸ê°€ ë¡œë„ë˜ëŠ” ë™ì•ˆ ë¡œë“œ ìƒíƒœë¥¼ ë Œë”ë§í•˜ê¸° ìœ„í•´ ì„ íƒì ìœ¼ë¡œ ë¡œë”©ì»´í¬ë„ŒíŠ¸ë¥¼ ì¶”ê°€ í•  ìˆ˜ ìˆë‹¤.
ex) const DynamicComponentWithCustomLoading = dynamic(() => import('../components/hello'),
        { loading: () => <span>Loading...</span>}
    );

-With Suspense
Suspenseë¥¼ ì‚¬ìš©í•˜ë©´ React.lazy ë° React18ì˜ Suspenseì™€ ìœ ì‚¬í•œ ì»´í¬ë„ŒíŠ¸ë¥¼ ìì—°ë¡œë“œ(lazy-load)í•  ìˆ˜ ìˆë‹¤.
fallbackì´ ìˆëŠ” í´ë¼ì´ì–¸íŠ¸ ì¸¡ ë˜ëŠ” ì„œë²„ ì¸¡ì—ì„œë§Œ ì‘ë™í•œë‹¤.
ex) const DynamicComponent = dynamic(() => import('../component/example'), { suspense : true });
    < Suspense fallback={`loading...`}>
        <DynamicLazyComponent />
    < /Suspense>
ì°¸ì¡°
https://nextjs.org/docs/advanced-features/dynamic-import#with-custom-loading-component



################################
### 19.4 _document and Fonts ###
################################
-Custom Document
Custom DocumentëŠ” í˜ì´ì§€ë¥¼ ëœë”ë§í•˜ëŠ”ë° ì‚¬ìš©ë˜ëŠ” html ë° body íƒœê·¸ë¥¼ ì—…ë°ì´íŠ¸í•  ìˆ˜ ìˆë‹¤.
ì´ íŒŒì¼ì€ ì„œë²„ì—ì„œë§Œ ëœë”ë§ë˜ë¯€ë¡œ onClickê³¼ ê°™ì€ ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ëŠ” _documentì—ì„œ ì‚¬ìš©í•  ìˆ˜ ì—†ë‹¤.
html, Head, Main ë° NextScriptëŠ” í˜ì´ì§€ê°€ ì œëŒ€ë¡œ ë Œë”ë§ë˜ëŠ”ë° í•„ìš”í•˜ë‹¤.
ex) import { Html, Head, Main, NextScript } from 'next/document'

    export default function Document() {
    return (
        <Html>
            <Head />
            <body>
                <Main />
                <NextScript />
            </body>
        </Html>
        )
    }
â­â­â­ Custom DocumentëŠ” ì„œë²„ì—ì„œ í•œë²ˆë§Œ ëœë”ë§ëœë‹¤. â­â­â­
ì°¸ì¡°
https://nextjs.org/docs/advanced-features/custom-document

Custom Document (Typescript)
https://nextjs.org/docs/advanced-features/custom-document#typescript



#############################
### 19.5 Script Component ###
#############################
-Script Component
Next.js Script ì»´í¬ë„ŒíŠ¸ì¸ next/scriptëŠ” HMTL script íƒœê·¸ì˜ í™•ì¥ì´ë‹¤.
ì´ë¥¼ í†µí•´ ê°œë°œìëŠ” ì• í”Œë¦¬ì¼€ì´ì…˜ì—ì„œ ì¨ë“œ íŒŒí‹° ìŠ¤í¬ë¦½íŠ¸ì˜ ë¡œë“œë˜ëŠ” ìš°ì„  ìˆœìœ„ë¥¼ ì„¤ì •í•  ìˆ˜ ìˆìœ¼ë¯€ë¡œ 
ê°œë°œì ì‹œê°„ì„ ì ˆì•½í•˜ë©´ì„œ ë¡œë“œí•˜ëŠ” ì„±ëŠ¥ì„ í–¥ìƒì‹œí‚¬ ìˆ˜ ìˆë‹¤.

afterInteractive: í˜ì´ì§€ê°€ interactive ëœ í›„ì— ë¡œë“œ( ê¸°ë³¸ê°’ )
beforeInteractive: í˜ì´ì§€ê°€ interactive ë˜ê¸° ì „ì— ë¡œë“œ
lazyOnload: ë‹¤ë¥¸ ëª¨ë“  ë°ì´í„°ë‚˜ ì†ŒìŠ¤ë¥¼ ë¶ˆëŸ¬ì˜¨ í›„ì— ë¡œë“œ
worker: web workerì— ë¡œë“œ( ì‹¤í—˜ìš©? )



###############################
### 19.6 getServerSideProps ###
###############################
-getServerSideProps
í˜ì´ì§€ì—ì„œ getServerSideProps( ì„œë²„ì¸¡ ëœë”ë§ )ë¼ëŠ” í•¨ìˆ˜ë¥¼ exportê²½ìš° Next.jsëŠ” getServerSidePropsì—ì„œ
ë°˜í™˜ëœ ë°ì´í„°ë¥¼ ì‚¬ìš©í•˜ì—¬ ê° ìš”ì²­ì—ì„œ ì´ í˜ì´ì§€ë¥¼ ë¯¸ë¦¬ ëœë”ë§í•œë‹¤.

ex) export async function getServerSideProps(){
        return: {
            props: {},
        }
    }
ì°¸ì¡°
https://nextjs.org/docs/basic-features/data-fetching/get-server-side-props



######################
### 19.7 SSR + SWR ###
######################
-Pre-rendering with Default Data
í˜ì´ì§€ë¥¼ ë¯¸ë¦¬ ëœë”ë§í•´ì•¼ í•˜ëŠ” ê²½ìš° Next.jsëŠ” 2ê°€ì§€ í˜•íƒœì˜ ì‚¬ì „ ëœë”ë§ì„ ì§€ì›í•œë‹¤.
Static Generation(SSG), Server-side-Rendering(SSR)
SWRë¥¼ ì‚¬ìš©í•˜ë©´ì„œ, SEOë¥¼ ìœ„í•´ í˜ì´ì§€ë¥¼ ë¯¸ë¦¬ ëœë”ë§í•  ìˆ˜ ìˆìœ¼ë©° í´ë¼ì´ì–¸íŠ¸ ì¸¡ì—ì„œ caching, revalidation, focus taracking, refetchingì™€ ê°™ì€ ê¸°ëŠ¥ë„ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.

ex) export default function Page({ fallback }) {
    //SWRConfigì•ˆì— SWRí›…ì€ SWRConfigì˜ valueê°’ì„ ì‚¬ìš©í•©ë‹ˆë‹¤.
    //fallbackì—ëŠ” key-value ê°ì²´ë¥¼ í†µí•´ ìºì‹œì˜ ì´ˆê¸°ê°’ì„ ì„¤ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
        return (
        <SWRConfig value={{ fallback }}>
            <Article />
        </SWRConfig>
        )
    }
ex) index.tsx
    const Page: NextPage<ProductsResponse> = ({ products, pages }) => {
        return(
        <SWRConfig
            value={{
            fallback: {
Key-value --->  [unstable_serialize(getKey)]: 
                [
                    {   
                    ok: true,
                    products,
                    pages,
                    },
                ],
            },
            }}
        >
            <Home />
        </SWRConfig>
        )
    };
ì°¸ì¡°
https://swr.vercel.app/docs/with-nextjs#pre-rendering-with-default-data



#################################
### 19.8 SSR + Authentication ###
#################################
getServerSidePropsì—ëŠ” contextë¼ëŠ” ë°ì´í„°ê°€ ìˆë‹¤
context ì˜¤ë¸Œì íŠ¸ì˜ ë°ì´í„° íƒ€ì…ì€ NextPageContext
getServerSidePropsë¥¼ withSsrSession í•¨ìˆ˜ë¡œ í•œë²ˆ ë” ê°ì‹¸ì„œ ì¸ì¦ ì²˜ë¦¬ 



#########################
### 19.9 Blog Section ###
#########################
-getStaticProps
í˜ì´ì§€ì—ì„œ getStaticProps( ì •ì  ì‚¬ì´íŠ¸ ìƒì„± )ë¼ëŠ” í•¨ìˆ˜ë¥¼ exportí•˜ëŠ” ê²½ìš°
Next.jsëŠ” getStaticPropsì—ì„œ ë°˜í™˜ëœ propsë¥¼ ì‚¬ìš©í•˜ì—¬ ë¹Œë“œì‹œ ì´ í˜ì´ì§€ë¥¼ ë¯¸ë¦¬ ëœë”ë§í•œë‹¤.
ex) DBë¥¼ ê±°ì¹˜ì§€ ì•Šê³  mdíŒŒì¼ë¡œ í˜ì´ì§€ë¥¼ ì‘ì„±í•  ë•Œ
nomadcodersì˜ faq í˜ì´ì§€ 
https://nomadcoders.co/faq

ì°¸ì¡°
https://nextjs.org/docs/basic-features/data-fetching/get-static-props



############################
### 19.10 getStaticProps ###
############################
-getStaticProps
getStaticPropsëŠ” í•­ìƒ ì„œë²„ì—ì„œ ì‹¤í–‰ë˜ê³  í´ë¼ì´ì–¸íŠ¸ì—ì„œëŠ” ì‹¤í–‰ë˜ì§€ ì•ŠëŠ”ë‹¤.
getStaticPropsëŠ” ì •ì  HTMLì„ ìƒì„±í•˜ë¯€ë¡œ ë“¤ì–´ì˜¤ëŠ” request( ex: ì¿¼ë¦¬ ë§¤ê°œë³€ìˆ˜ or HTTPí—¤ë” )ì— ì•¡ì„¸ìŠ¤í•  ìˆ˜ ì—†ë‹¤.
getStaticPropsê°€ ìˆëŠ” í˜ì´ì§€ê°€ ë¹Œë“œì‹œ ë¯¸ë¦¬ ëœë”ë§ë˜ë©´ í˜ì´ì§€ HTMLíŒŒì¼ ì™¸ì—ë„ Next.jsê°€ getStaticProps ì‹¤í–‰ ê²°ê³¼ë¥¼ í¬í•¨í•˜ëŠ” JSONíŒŒì¼ì„ ìƒì„±í•œë‹¤.

readdireSync()
ë””ë ‰í† ë¦¬(í´ë”)ì˜ ë‚´ìš©ì„ ì½ëŠ”ë‹¤

readFileSync()
pathì˜ ë‚´ìš©ì„ ë°˜í™˜

ì°¸ì¡°
https://nextjs.org/docs/basic-features/data-fetching/get-static-props

gray-matter
ë¬¸ìì—´ ë˜ëŠ” íŒŒì¼ì—ì„œ front-matterì„ íŒŒì‹±í•œë‹¤.
npm i gray-matter
https://github.com/jonschlinkert/gray-matter

â­getServerSideProps : ìœ ì €ì˜ ìš”ì²­ì´ ë°œìƒí•  ë•Œë§ˆë‹¤ ì¼ì–´ë‚¨
â­getStaticProps : í˜ì´ì§€ê°€ ë¹Œë“œë˜ Next.jsê°€ í•´ë‹¹ í˜ì´ì§€ë¥¼ exportí•œ í›„ ì¼ë°˜ htmlë¡œ ë ë•Œ, ë”± í•œë²ˆë§Œ ì‹¤í–‰ëœë‹¤.



#####################################
### 19.11 getStaticPaths part One ###
#####################################
-ë¯¸ë“¤ì›¨ì–´( _middleware )
ì¤‘ê°„ì— requestë¥¼ ê°€ë¡œì±ˆë‹¤.

Server( getInitialProps ë˜ëŠ” getServerSideProps )
ëŸ°íƒ€ì„ì‹œ ì„œë²„ ì‚¬ì´ë“œ ëœë”ë§

Static( ì´ˆê¸° propsë¥¼ ì‚¬ìš©í•˜ì§€ ì•ŠìŒ )
static HTMLë¡œ ìë™ìœ¼ë¡œ ëœë”ë§ëœë‹¤.

SSG( getStaticProps )
static HTML + JSONìœ¼ë¡œ ìë™ìœ¼ë¡œ ìƒì„±ëœë‹¤.



#####################################
### 19.12 getStaticPaths part Two ###
#####################################
-getStaticPaths
â­ë™ì ì¸ ë¼ìš°íŠ¸( ë™ì ì¸ URL )ì„ ê°–ëŠ” í˜ì´ì§€ì—ì„œ getStaticPropsë¥¼ ì‚¬ìš©í•  ë•Œ í•„ìš”í•˜ë‹¤. (ex. [slug].tsx)
ë™ì  ê²½ë¡œë¥¼ ì‚¬ìš©í•˜ëŠ” í˜ì´ì§€ì—ì„œ getStaticPaths( ì •ì  ì‚¬ì´íŠ¸ ìƒì„± )ë¼ëŠ” í•¨ìˆ˜ë¥¼ exportí•  ë•Œ Next.jsëŠ” getStaticPathsì— ì˜í•´
ì§€ì •ëœ ëª¨ë“  ê²½ë¡œë¥¼ ì •ì ìœ¼ë¡œ ë¯¸ë¦¬ ëœë”ë§í•œë‹¤,
â­getStaticPathsëŠ” getStaticPropsì™€ í•¨ê»˜ ì‚¬ìš©í•´ì•¼í•˜ë©° getServerSidePropsì™€ í•¨ê»˜ ì‚¬ìš©í•  ìˆ˜ ì—†ë‹¤.
ë˜í•œ getStaticPathsëŠ” getStaticPropsë„ ì‚¬ìš©í•˜ëŠ” ë™ì  ê²½ë¡œì—ì„œë§Œ exportí•  ìˆ˜ ìˆë‹¤.

ex) [slug].tsx
    export async function getStaticPaths(){
        return {
            paths: [
                params : { slug : "@@@" }       ê°ì²´ì— key ì´ë¦„ì€ [slug].tsx íŒŒì¼ì— ë³€ìˆ˜?ê°’ì´ë‘ ë™ì´í•´ì•¼í•œë‹¤.
            ],
            fallback: true      --> false or 'blocking'
        };
    }
ì°¸ì¡°
https://nextjs.org/docs/basic-features/data-fetching/get-static-paths



#####################################
### 19.13 Dynamic getStaticProps  ###
#####################################
-matter.read(filepath, options)
íŒŒì¼ ì‹œìŠ¤í…œì—ì„œ íŒŒì¼ì„ ë™ê¸°ì ìœ¼ë¡œ ì½ê³ , front matterë¥¼ íŒŒì‹±í•œë‹¤.
matter()ì™€ ë™ì¼í•œ ê°ì²´ë¥¼ ë°˜í™˜í•œë‹¤.
filepathì—ëŠ” ì½ì„ íŒŒì¼ì˜ ê²½ë¡œë¥¼ ì§€ì •í•œë‹¤.
ex) const file = matter.read('./posts/@@@@.md');
ì°¸ì¡°
https://www.npmjs.com/package/gray-matter#read

-remark-html
HTML serializing ì§€ì›ì„ ì¶”ê°€í•˜ëŠ” remark í”ŒëŸ¬ê·¸ì¸
ì„¤ì¹˜ 
$ npm i remark-html remark-parse unified

ex) const file = await unified()
        .use(remarkParse)
        .use(remarkHtml)
        .process(await read('example.md'))
ì°¸ì¡°
https://www.npmjs.com/package/remark-html



########################
### 19.14 Inner HTML ###
########################
-dangerouslySetInnerHTML
dangerouslySetInnerHTMLì€ ë¸Œë¼ìš°ì € DOMì—ì„œ innerHTMLì„ ì‚¬ìš©í•˜ê¸° ìœ„í•œ Reactì˜ ëŒ€ì²´ ë°©ë²•ì´ë‹¤.
ì¼ë°˜ì ìœ¼ë¡œ ì½”ë“œì—ì„œ HTMLì„ ì„¤ì •í•˜ëŠ” ê²ƒì€ ì‚¬ì´íŠ¸ê°„ ìŠ¤í¬ë¦¬ë¹™ ê³µê²©ì— ì‰½ê²Œ ë…¸ì¶œë  ìˆ˜ ìˆê¸° ë•Œë¬¸ì— ìœ„í—˜í•˜ë‹¤.
ë”°ë¼ì„œ Reactì—ì„œ ì§ì ‘ HTMLì„ ì„¤ì •í•  ìˆ˜ëŠ” ìˆì§€ë§Œ, ìœ„í—˜í•˜ë‹¤ëŠ” ê²ƒì„ ìƒê¸°ì‹œí‚¤ê¸° ìœ„í•´ dangerouslySetInnerHTMLì„ ì‘ì„±í•˜ê³ 
__html í‚¤ë¡œ ê°ì²´ë¥¼ ì „ë‹¬í•´ì•¼ í•œë‹¤.
ex) function MyComponent() {
        return < div dangerouslySetInnerHTML={{ __html: "< div>pizza< /div>" }} / >;
    }
ì°¸ì¡°
https://ko.reactjs.org/docs/dom-elements.html#dangerouslysetinnerhtml



###################
### 19.15 Recap ###
###################
getStaticPathsëŠ” ì–¸ì œ ì‚¬ìš©í•´ì•¼ í•˜ëŠ”ì§€?
ë™ì  ê²½ë¡œë¥¼ ì‚¬ìš©í•˜ëŠ” í˜ì´ì§€ë¥¼ ì •ì ìœ¼ë¡œ pre-renderingí•˜ëŠ” ê²½ìš° getStaticPathsë¥¼ ì‚¬ìš©í•´ì•¼í•œë‹¤.
-ë°ì´í„°ë¥¼ í—¤ë“œë¦¬ìŠ¤ CMSì—ì„œ ê°€ì ¸ì˜¬ ë•Œ
-ë°ì´í„°ë¥¼ ë°ì´í„°ë² ì´ìŠ¤ì—ì„œ ê°€ì ¸ì˜¬ ë•Œ
-ë°ì´í„°ë¥¼ íŒŒì¼ ì‹œìŠ¤í…œì—ì„œ ê°€ì ¸ì˜¬ ë•Œ
-ë°ì´í„°ë¥¼ ê³µê°œì ìœ¼ë¡œ ìºì‹œí•  ìˆ˜ ìˆì„ ë•Œ
-í˜ì´ì§€ëŠ” SEOë¥¼ ìœ„í•´ pre-renderingë˜ì–´ì•¼ í•˜ê³  ë§¤ìš° ë¹¨ë¼ì•¼ í•  ë•Œ
getStaticPropsëŠ” ì„±ëŠ¥ì„ ìœ„í•´ CDNì—ì„œ ìºì‹œí•  ìˆ˜ ìˆëŠ” HTML ë° JSON íŒŒì¼ì„ ìƒì„±í•œë‹¤.
ì°¸ì¡°
https://nextjs.org/docs/basic-features/data-fetching/get-static-paths#when-should-i-use-getstaticpaths

ì–¸ì œ ì‹¤í–‰ë˜ëŠ”ì§€?
getStaticPathsëŠ” í”„ë¡œë•ì…˜ í™˜ê²½ì—ì„œ ë¹Œë“œí•˜ëŠ” ë™ì•ˆì—ë§Œ ì‹¤í–‰ë˜ë©° ëŸ°íƒ€ì„ì—ëŠ” í˜¸ì¶œë˜ì§€ ì•ŠëŠ”ë‹¤.
ì°¸ì¡°
https://nextjs.org/docs/basic-features/data-fetching/get-static-paths#when-does-getstaticpaths-run



#########################
### 20.1 ISR part One ###
#########################
-ISR( Incremental Static Regeneration )
Next.jsë¥¼ ì‚¬ìš©í•˜ë©´ ì‚¬ì´íŠ¸ë¥¼ buildí•œ í›„ ë‹¤ì‹œ static í˜ì´ì§€ë¥¼ ë§Œë“¤ê±°ë‚˜ ì—…ë°ì´íŠ¸í•  ìˆ˜ ìˆë‹¤.
ISRë¥¼ ì‚¬ìš©í•˜ë©´ â­ì „ì²´ ì‚¬ì´íŠ¸ë¥¼ ë‹¤ì‹œ buildí•  í•„ìš” ì—†ì´â­ ê°ê°ì˜ í˜ì´ì§€ë³„ë¡œ static-Generationì„ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.
ISRì„ ì‚¬ìš©í•˜ë©´ ìˆ˜ë°±ë§Œ í˜ì´ì§€ë¡œ í™•ì¥í•˜ë©´ì„œ staticì˜ ì´ì ì„ ìœ ì§€í•  ìˆ˜ìˆë‹¤.
ISRì„ ì‚¬ìš©í•˜ë ¤ë©´ getStaticPropsì— revalidate propì„ ì¶”ê°€í•˜ë©´ëœë‹¤.

ex) export async function getStaticProps() {
        const res = await fetch('https://.../posts');
        const posts = await res.json();
    return {
        props: {
            posts,
        },
        revalidate: 10, // requestê°€ ì™”ì„ ë•Œ ìµœëŒ€ 10ì´ˆì— í•œë²ˆì”© Next.jsëŠ” í˜ì´ì§€ re-generate(ì¬ìƒì„±)ì„ ì‹œë„í•©ë‹ˆë‹¤. (10ì´ˆë¡œ ì§€ì •í•¨)
        }
    }
ì°¸ì¡°
https://nextjs.org/docs/basic-features/data-fetching/incremental-static-regeneration